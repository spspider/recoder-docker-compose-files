[
    {
        "id": "65bf31c16d103884",
        "type": "tab",
        "label": "my_room",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "81965ae3.dd08a8",
        "type": "tab",
        "label": "Main",
        "disabled": true,
        "info": ""
    },
    {
        "id": "d8baf37f.71552",
        "type": "tab",
        "label": "EntranceDoor",
        "disabled": false,
        "info": ""
    },
    {
        "id": "28839e10.005852",
        "type": "tab",
        "label": "Balcony",
        "disabled": true,
        "info": ""
    },
    {
        "id": "c22de8d6.aec338",
        "type": "tab",
        "label": "Bathroom",
        "disabled": true,
        "info": ""
    },
    {
        "id": "a5eb6fcc.fc0cb",
        "type": "tab",
        "label": "fan",
        "disabled": true,
        "info": ""
    },
    {
        "id": "af702991.bdca58",
        "type": "tab",
        "label": "reload all",
        "disabled": false,
        "info": ""
    },
    {
        "id": "d2d769b0.c57da8",
        "type": "tab",
        "label": "Telegram",
        "disabled": false,
        "info": ""
    },
    {
        "id": "a69381581f637ec6",
        "type": "tab",
        "label": "roof",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "772e6979.67cd08",
        "type": "tab",
        "label": "System"
    },
    {
        "id": "47e2824120b2a9e0",
        "type": "tab",
        "label": "camera",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "e9df3544.ca85a8",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "reset": false
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#097479",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#0eb8c0",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "9543e72b.76c248",
        "type": "ui_tab",
        "name": "Ванна",
        "icon": "dashboard",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "4c91d370.525c2c",
        "type": "ui_tab",
        "name": "двери",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "6db9f969.6989a8",
        "type": "ui_tab",
        "name": "Квартира",
        "icon": "dashboard",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ca786bad.5ac7a8",
        "type": "telegram bot",
        "botname": "node_red_home_bot_bot",
        "usernames": "",
        "chatids": "",
        "baseapiurl": "",
        "testenvironment": false,
        "updatemode": "polling",
        "pollinterval": "300",
        "usesocks": false,
        "sockshost": "",
        "socksport": "6667",
        "socksusername": "anonymous",
        "sockspassword": "",
        "bothost": "",
        "botpath": "",
        "localbotport": "8443",
        "publicbotport": "8443",
        "privatekey": "",
        "certificate": "",
        "useselfsignedcertificate": false,
        "sslterminated": false,
        "verboselogging": false
    },
    {
        "id": "cad186fc.6717b8",
        "type": "ui_group",
        "name": "Ванна2",
        "tab": "9543e72b.76c248",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "4a84c495.0fce7c",
        "type": "ui_group",
        "name": "двери2",
        "tab": "4c91d370.525c2c",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "6a1fd3d5.2b832c",
        "type": "ui_group",
        "name": "двери3",
        "tab": "4c91d370.525c2c",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "7caf40b8.ebe01",
        "type": "ui_group",
        "name": "баклон2",
        "tab": "6db9f969.6989a8",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "6e18ecf1.e2d0c4",
        "type": "ui_tab",
        "name": "Computer",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ce3b49b9.4b9e18",
        "type": "ui_group",
        "name": "Computer",
        "tab": "6e18ecf1.e2d0c4",
        "order": 1,
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "fc599eb8.f87e",
        "type": "ui_group",
        "name": "TCPU-diff",
        "tab": "6e18ecf1.e2d0c4",
        "order": 2,
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "4b290438.730fbc",
        "type": "ui_group",
        "name": "двери",
        "tab": "4c91d370.525c2c",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "650233e5.37ad3c",
        "type": "ui_group",
        "name": "Балкон",
        "tab": "6db9f969.6989a8",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "6ed8da82.791bd4",
        "type": "ui_group",
        "name": "Теплый пол",
        "tab": "6db9f969.6989a8",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "7db79158682fc8ec",
        "type": "ui_tab",
        "name": "MyRoom",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "d933d053d66f5444",
        "type": "ui_group",
        "name": "Room",
        "tab": "7db79158682fc8ec",
        "order": 1,
        "disp": true,
        "width": 6,
        "collapse": false,
        "className": ""
    },
    {
        "id": "a7804332c06e238f",
        "type": "mqtt-broker",
        "name": "mqtthivemq",
        "broker": "177e3ee7cf004e6ebed04b25d4c51a26.s1.eu.hivemq.cloud",
        "port": "8883",
        "tls": "",
        "clientid": "node-red-amd",
        "autoConnect": true,
        "usetls": true,
        "protocolVersion": 4,
        "keepalive": 60,
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "e6013c6f.69328",
        "type": "ui_tab",
        "name": "System",
        "icon": "computer"
    },
    {
        "id": "7853403.230cdc",
        "type": "ui_group",
        "name": "CPU Load",
        "tab": "e6013c6f.69328",
        "order": 2,
        "disp": true,
        "width": "6"
    },
    {
        "id": "1d1da0fc.6ab84f",
        "type": "ui_group",
        "name": "Memory",
        "tab": "e6013c6f.69328",
        "order": 3,
        "disp": true,
        "width": "6"
    },
    {
        "id": "a9912d64.97094",
        "type": "ui_group",
        "name": "System Information",
        "tab": "e6013c6f.69328",
        "order": 1,
        "disp": true,
        "width": "6"
    },
    {
        "id": "1d2608aa5cac07fa",
        "type": "ui_group",
        "name": "Roof",
        "tab": "7db79158682fc8ec",
        "order": 2,
        "disp": true,
        "width": 6,
        "collapse": false,
        "className": ""
    },
    {
        "id": "e1eafc56a30f1862",
        "type": "function",
        "z": "65bf31c16d103884",
        "name": "myroom",
        "func": "var topicObjects = [];\nvar parsed = (msg.payload);\nvar topic = (msg.topic)\nvar  outputCount_number = node.outputCount\nif (topic == \"initial\") {\n    for (var i = 0; i < parsed.stat.length; i++) {\n        var topicObject = {\n            payload: parseFloat(parsed.stat[i]),\n            topic: i\n        };\n        topicObjects.push(topicObject);\n    }\n    return topicObjects;\n}\nelse {// topic is not initial\n    for (var i = 0; i < outputCount_number; i++) {\n        if (i == parseInt(topic)) {\n            topicObject = {\n                payload: parseInt(parsed),\n                topic: parseInt(topic)\n            }\n            topicObjects.push(topicObject);\n        };\n        topicObjects.push(null);\n    }\n    return topicObjects;\n} \n\n",
        "outputs": 6,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 220,
        "wires": [
            [
                "b45d60b7e981e616"
            ],
            [
                "6995750bd463cad0"
            ],
            [
                "7f436f8ca4c71427"
            ],
            [
                "dde3ab414f281068"
            ],
            [
                "a48233ad1ad88800"
            ],
            [
                "a5d85328c784360f"
            ]
        ]
    },
    {
        "id": "10c5484d040931b8",
        "type": "inject",
        "z": "65bf31c16d103884",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "10",
        "crontab": "",
        "once": false,
        "onceDelay": "10",
        "topic": "initial",
        "payload": "",
        "payloadType": "date",
        "x": 250,
        "y": 220,
        "wires": [
            [
                "d6b6998323b52267"
            ]
        ]
    },
    {
        "id": "d6b6998323b52267",
        "type": "http request",
        "z": "65bf31c16d103884",
        "name": "myroom",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "192.168.1.150/sendAJAX?json={%22t%22:127,%22v%22:0}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 440,
        "y": 220,
        "wires": [
            [
                "e1eafc56a30f1862"
            ]
        ]
    },
    {
        "id": "b45d60b7e981e616",
        "type": "ui_switch",
        "z": "65bf31c16d103884",
        "name": "curtainUp",
        "label": "curtain Up",
        "tooltip": "",
        "group": "d933d053d66f5444",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "0",
        "topicType": "str",
        "style": "",
        "onvalue": "0",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "1",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 800,
        "y": 140,
        "wires": [
            [
                "8a2e1486aafc8c18"
            ]
        ]
    },
    {
        "id": "6995750bd463cad0",
        "type": "ui_switch",
        "z": "65bf31c16d103884",
        "name": "curtainDown",
        "label": "curtain Down",
        "tooltip": "",
        "group": "d933d053d66f5444",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "1",
        "topicType": "str",
        "style": "",
        "onvalue": "0",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "1",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 810,
        "y": 180,
        "wires": [
            [
                "9929503dd4e66aa4"
            ]
        ]
    },
    {
        "id": "3e96ad22e502c317",
        "type": "http request",
        "z": "65bf31c16d103884",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "http://192.168.1.150/sendAJAX?json={%22t%22:{{topic}},%22v%22:{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1430,
        "y": 240,
        "wires": [
            [
                "ae6e72d47fe7dc42",
                "9eb949a941dbc63b"
            ]
        ]
    },
    {
        "id": "7f436f8ca4c71427",
        "type": "ui_switch",
        "z": "65bf31c16d103884",
        "name": "Light backyard",
        "label": "Light backyard",
        "tooltip": "",
        "group": "d933d053d66f5444",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "2",
        "topicType": "str",
        "style": "",
        "onvalue": "0",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "1",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 820,
        "y": 220,
        "wires": [
            [
                "db9de5c8ae2b786e"
            ]
        ]
    },
    {
        "id": "e8446166ae58b128",
        "type": "rbe",
        "z": "65bf31c16d103884",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 970,
        "y": 280,
        "wires": [
            [
                "a23ad46d36d12c16"
            ]
        ]
    },
    {
        "id": "a48233ad1ad88800",
        "type": "ui_switch",
        "z": "65bf31c16d103884",
        "name": "power Light",
        "label": "power Light",
        "tooltip": "",
        "group": "d933d053d66f5444",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "4",
        "topicType": "str",
        "style": "",
        "onvalue": "0",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "1",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 810,
        "y": 340,
        "wires": [
            [
                "3f1d4ec111668b15"
            ]
        ]
    },
    {
        "id": "3f1d4ec111668b15",
        "type": "rbe",
        "z": "65bf31c16d103884",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 970,
        "y": 340,
        "wires": [
            [
                "a23ad46d36d12c16"
            ]
        ]
    },
    {
        "id": "9929503dd4e66aa4",
        "type": "rbe",
        "z": "65bf31c16d103884",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 950,
        "y": 180,
        "wires": [
            [
                "a23ad46d36d12c16",
                "842067f3ca74b50a"
            ]
        ]
    },
    {
        "id": "8a2e1486aafc8c18",
        "type": "rbe",
        "z": "65bf31c16d103884",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 950,
        "y": 140,
        "wires": [
            [
                "a23ad46d36d12c16",
                "842067f3ca74b50a"
            ]
        ]
    },
    {
        "id": "dde3ab414f281068",
        "type": "ui_slider",
        "z": "65bf31c16d103884",
        "name": "",
        "label": "slider",
        "tooltip": "",
        "group": "d933d053d66f5444",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "3",
        "topicType": "str",
        "min": 0,
        "max": "1024",
        "step": 1,
        "className": "",
        "x": 810,
        "y": 280,
        "wires": [
            [
                "e8446166ae58b128"
            ]
        ]
    },
    {
        "id": "db9de5c8ae2b786e",
        "type": "rbe",
        "z": "65bf31c16d103884",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 970,
        "y": 220,
        "wires": [
            [
                "a23ad46d36d12c16"
            ]
        ]
    },
    {
        "id": "ae6e72d47fe7dc42",
        "type": "delay",
        "z": "65bf31c16d103884",
        "name": "",
        "pauseType": "queue",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "3",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 1660,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "fa7f17f0960f9899",
        "type": "mqtt in",
        "z": "65bf31c16d103884",
        "name": "mqtt-messages",
        "topic": "",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a7804332c06e238f",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 540,
        "y": 500,
        "wires": [
            [
                "329027747ad8fbdf"
            ]
        ]
    },
    {
        "id": "067d0297fdf0092b",
        "type": "mqtt out",
        "z": "65bf31c16d103884",
        "name": "",
        "topic": "",
        "qos": "0",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a7804332c06e238f",
        "x": 1820,
        "y": 480,
        "wires": []
    },
    {
        "id": "75c151df5906ff28",
        "type": "function",
        "z": "65bf31c16d103884",
        "name": "subscribe",
        "func": "var subcsciptionLoop = []\n\nfor (var i = 0; i < 6; i++) {\n    var subscriptionVar = {\n        action: \"subscribe\",\n        topic: \"node-red/room/control/\" + i\n    }\n    subcsciptionLoop.push(subscriptionVar);\n}\nreturn [subcsciptionLoop];",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 500,
        "wires": [
            [
                "fa7f17f0960f9899"
            ]
        ]
    },
    {
        "id": "4de5acada9816682",
        "type": "inject",
        "z": "65bf31c16d103884",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 500,
        "wires": [
            [
                "75c151df5906ff28"
            ]
        ]
    },
    {
        "id": "329027747ad8fbdf",
        "type": "function",
        "z": "65bf31c16d103884",
        "name": "decoder",
        "func": "var topicIn = msg.topic; //node-red/room/control/0\nvar parts = topicIn.split('/');\nvar lastPart = parts[parts.length - 1];\nvar number = parseInt(lastPart, 10);\n\nmsg.topic = number;\nmsg.payload = msg.payload;\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 500,
        "wires": [
            [
                "e1eafc56a30f1862"
            ]
        ]
    },
    {
        "id": "9eb949a941dbc63b",
        "type": "function",
        "z": "65bf31c16d103884",
        "name": "encoder node-red/room/{{topic}}",
        "func": "msg.topic = \"node-red/room/\" + msg.topic;\nmsg.qos = 0;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1610,
        "y": 480,
        "wires": [
            [
                "067d0297fdf0092b"
            ]
        ]
    },
    {
        "id": "a23ad46d36d12c16",
        "type": "delay",
        "z": "65bf31c16d103884",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1210,
        "y": 240,
        "wires": [
            [
                "3e96ad22e502c317"
            ]
        ]
    },
    {
        "id": "7e31b05aed36e8da",
        "type": "ui_chart",
        "z": "65bf31c16d103884",
        "name": "",
        "group": "d933d053d66f5444",
        "order": 7,
        "width": 0,
        "height": 0,
        "label": "chart",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "604800",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1090,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "842067f3ca74b50a",
        "type": "delay",
        "z": "65bf31c16d103884",
        "name": "",
        "pauseType": "delay",
        "timeout": "30",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1180,
        "y": 140,
        "wires": [
            [
                "94997020bfecbf87"
            ]
        ]
    },
    {
        "id": "94997020bfecbf87",
        "type": "function",
        "z": "65bf31c16d103884",
        "name": "msg payload = 1",
        "func": "msg.payload = 1;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1360,
        "y": 140,
        "wires": [
            [
                "6995750bd463cad0",
                "b45d60b7e981e616"
            ]
        ]
    },
    {
        "id": "a5d85328c784360f",
        "type": "function",
        "z": "65bf31c16d103884",
        "name": "set topic and payload filter",
        "func": "if (msg.payload > 60){\n    return null;\n}\nmsg.topic = 5;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 910,
        "y": 400,
        "wires": [
            [
                "7e31b05aed36e8da"
            ]
        ]
    },
    {
        "id": "f02311ac.c8019",
        "type": "http request",
        "z": "81965ae3.dd08a8",
        "name": "теплый пол",
        "method": "GET",
        "ret": "obj",
        "paytoqs": false,
        "url": "http://192.168.1.111/sendAJAX?json={%22t%22:127,%22v%22:0}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 390,
        "y": 180,
        "wires": [
            [
                "8c360f8d.a7efe",
                "f7f494e6.d6dec8"
            ]
        ]
    },
    {
        "id": "8c360f8d.a7efe",
        "type": "function",
        "z": "81965ae3.dd08a8",
        "name": "теплый пол",
        "func": "var parsed =(msg.payload);\nvar stat0 ={payload: parsed.stat[0]};//батарея балкон\nvar stat1 ={payload: parsed.stat[1]};//насос\nvar stat2 ={payload: parsed.stat[2]};//кухня\nvar stat3 ={payload: parsed.stat[3]};//температура\nvar stat4 ={payload: parsed.stat[4]};//коридор\nvar stat5 ={payload: parsed.stat[5]};//комната1\nvar stat6 ={payload: parsed.stat[6]};//комната2\nvar stat7 ={payload: parsed.stat[7]};//балкон\nreturn [ stat0, stat1, stat2, stat3, stat4,stat5,stat6,stat7 ];",
        "outputs": 8,
        "noerr": 0,
        "x": 570,
        "y": 200,
        "wires": [
            [
                "f4d4155f.185418"
            ],
            [
                "b2470924.3d1688"
            ],
            [
                "94e3cba2.a20498"
            ],
            [
                "62054911.675008"
            ],
            [
                "6e48c23a.b0701c"
            ],
            [
                "da5fb0a7.8c545"
            ],
            [
                "d7f8c4fb.ea6ad8"
            ],
            [
                "49ca05d9.483c5c"
            ]
        ]
    },
    {
        "id": "d764a357.0ba21",
        "type": "http request",
        "z": "81965ae3.dd08a8",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.111/sendAJAX?json={%22t%22:0,%22v%22:{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "f4d4155f.185418",
        "type": "ui_switch",
        "z": "81965ae3.dd08a8",
        "name": "",
        "label": "батарея балкон",
        "tooltip": "",
        "group": "6ed8da82.791bd4",
        "order": 1,
        "width": "0",
        "height": "0",
        "passthru": true,
        "decouple": "false",
        "topic": "testTopic",
        "style": "",
        "onvalue": "0",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "1",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "x": 800,
        "y": 140,
        "wires": [
            [
                "d764a357.0ba21"
            ]
        ]
    },
    {
        "id": "b2470924.3d1688",
        "type": "ui_switch",
        "z": "81965ae3.dd08a8",
        "name": "",
        "label": "насос",
        "tooltip": "",
        "group": "6ed8da82.791bd4",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "0",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "1",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "x": 770,
        "y": 160,
        "wires": [
            [
                "e4ea292.acec6d8"
            ]
        ]
    },
    {
        "id": "e4ea292.acec6d8",
        "type": "http request",
        "z": "81965ae3.dd08a8",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.111/sendAJAX?json={%22t%22:1,%22v%22:{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "4bb63ff0.33de7",
        "type": "http request",
        "z": "81965ae3.dd08a8",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.111/sendAJAX?json={%22t%22:2,%22v%22:{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "94e3cba2.a20498",
        "type": "ui_switch",
        "z": "81965ae3.dd08a8",
        "name": "",
        "label": "кухня",
        "tooltip": "",
        "group": "6ed8da82.791bd4",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "testTopic",
        "style": "",
        "onvalue": "0",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "1",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "x": 770,
        "y": 180,
        "wires": [
            [
                "4bb63ff0.33de7"
            ]
        ]
    },
    {
        "id": "e7a46c71.fc4af",
        "type": "http request",
        "z": "81965ae3.dd08a8",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.111/sendAJAX?json={%22t%22:4,%22v%22:{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "6e48c23a.b0701c",
        "type": "ui_switch",
        "z": "81965ae3.dd08a8",
        "name": "",
        "label": "коридор",
        "tooltip": "",
        "group": "6ed8da82.791bd4",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "testTopic",
        "style": "",
        "onvalue": "0",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "1",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "x": 780,
        "y": 220,
        "wires": [
            [
                "e7a46c71.fc4af"
            ]
        ]
    },
    {
        "id": "da5fb0a7.8c545",
        "type": "ui_switch",
        "z": "81965ae3.dd08a8",
        "name": "",
        "label": "комната1",
        "tooltip": "",
        "group": "6ed8da82.791bd4",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "0",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "1",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "x": 780,
        "y": 240,
        "wires": [
            [
                "d86230d9.11cec"
            ]
        ]
    },
    {
        "id": "d86230d9.11cec",
        "type": "http request",
        "z": "81965ae3.dd08a8",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.111/sendAJAX?json={%22t%22:5,%22v%22:{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "727b90e1.19a7d",
        "type": "http request",
        "z": "81965ae3.dd08a8",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.111/sendAJAX?json={%22t%22:6,%22v%22:{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "d7f8c4fb.ea6ad8",
        "type": "ui_switch",
        "z": "81965ae3.dd08a8",
        "name": "",
        "label": "комната2",
        "tooltip": "",
        "group": "6ed8da82.791bd4",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "testTopic",
        "style": "",
        "onvalue": "0",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "1",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "x": 780,
        "y": 260,
        "wires": [
            [
                "727b90e1.19a7d"
            ]
        ]
    },
    {
        "id": "49ca05d9.483c5c",
        "type": "ui_switch",
        "z": "81965ae3.dd08a8",
        "name": "",
        "label": "балкон",
        "tooltip": "",
        "group": "6ed8da82.791bd4",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "0",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "1",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "x": 780,
        "y": 280,
        "wires": [
            [
                "a907f66e.c1e888"
            ]
        ]
    },
    {
        "id": "a907f66e.c1e888",
        "type": "http request",
        "z": "81965ae3.dd08a8",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.111/sendAJAX?json={%22t%22:7,%22v%22:{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "8cdeb8d8.999788",
        "type": "debug",
        "z": "81965ae3.dd08a8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 930,
        "y": 340,
        "wires": []
    },
    {
        "id": "1c3bd674.a8d83a",
        "type": "inject",
        "z": "81965ae3.dd08a8",
        "name": "в 20:00",
        "repeat": "",
        "crontab": "00 20 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 520,
        "y": 300,
        "wires": [
            [
                "da5fb0a7.8c545"
            ]
        ]
    },
    {
        "id": "c31e5aa8.33da98",
        "type": "inject",
        "z": "81965ae3.dd08a8",
        "name": "в 05:00",
        "repeat": "",
        "crontab": "0 5-18 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 520,
        "y": 340,
        "wires": [
            [
                "a18f6f3f.96df2"
            ]
        ]
    },
    {
        "id": "128a6d8d.ae3d52",
        "type": "inject",
        "z": "81965ae3.dd08a8",
        "name": "",
        "repeat": "86400",
        "crontab": "",
        "once": true,
        "onceDelay": "30",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 470,
        "y": 440,
        "wires": [
            [
                "70ccde70.77381"
            ]
        ]
    },
    {
        "id": "70ccde70.77381",
        "type": "http request",
        "z": "81965ae3.dd08a8",
        "name": "IP",
        "method": "GET",
        "ret": "obj",
        "paytoqs": false,
        "url": "https://api.ipify.org?format=json",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 630,
        "y": 440,
        "wires": [
            [
                "f185365a.278e48"
            ]
        ]
    },
    {
        "id": "ac450f9c.5ad57",
        "type": "e-mail",
        "z": "81965ae3.dd08a8",
        "server": "smtp.gmail.com",
        "port": "465",
        "secure": true,
        "tls": true,
        "name": "spspider95@gmail.com",
        "dname": "spspider95",
        "x": 970,
        "y": 440,
        "wires": []
    },
    {
        "id": "f185365a.278e48",
        "type": "function",
        "z": "81965ae3.dd08a8",
        "name": "mail",
        "func": "\nmsg.topic=\"IP\";\nmsg.to=\"spspider95@gmail.com\";\nmsg.from=\"IPAdress\";\n\nvar thatIP= msg.payload.ip;\n\nvar storedIP = context.get ('ip') || 0;\nif(storedIP!==thatIP){\ncontext.set(\"ip\",thatIP);\nmsg.payload=\"http://\"+thatIP+\":1880/ui\";\n}\nelse{\n    return null;\n}\nif (thatIP===undefined){return null;}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 770,
        "y": 440,
        "wires": [
            [
                "ac450f9c.5ad57",
                "a492b93f.a1b348"
            ]
        ]
    },
    {
        "id": "9a81fe6e.7b3c3",
        "type": "telegram sender",
        "z": "81965ae3.dd08a8",
        "name": "sender",
        "bot": "ca786bad.5ac7a8",
        "haserroroutput": false,
        "outputs": 1,
        "x": 1130,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "a492b93f.a1b348",
        "type": "function",
        "z": "81965ae3.dd08a8",
        "name": "message",
        "func": "var content = msg.topic+\" :\"+msg.payload;\nvar TelegramChatIds = global.get(\"TelegramChatIds\");\nvar ObjectPayload={\n    \"chatId\": TelegramChatIds,\n    \"type\": \"message\",\n    \"content\":content \n}\nmsg.payload=ObjectPayload;\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 940,
        "y": 520,
        "wires": [
            [
                "9a81fe6e.7b3c3"
            ]
        ]
    },
    {
        "id": "a18f6f3f.96df2",
        "type": "function",
        "z": "81965ae3.dd08a8",
        "name": "check temp outer",
        "func": "var temp_outer= {payload:(global.get('temp_outer'))};\nvar set_outer_temp=global.get('temp_outside_slider');\nvar info={\n    \"topic\":\"warm_floor\",\n    \"payload\":\"теплый пол не включен из-за температуры снаружи:\" + temp_outer.payload + \" установленная температура:\" + set_outer_temp + \"\"\n};\nif (global.get(\"temp_outer_message\")===0){\n    info=null;\n}\nif (temp_outer.payload>set_outer_temp){//если температура больше 10 то отключать теплый пол\n    msg.payload=1;\n    msg.topic=\"warm_floor\";\n    global.set(\"temp_outer_message\",1);\n// global.set(\"temp_outer\",GlobalTemp);\n// msg.payload = global.get(\"Temp\");\n}else{\n    msg.payload=0;\n    info=null;\n}\n\nreturn [msg,info];",
        "outputs": 2,
        "noerr": 0,
        "x": 710,
        "y": 340,
        "wires": [
            [
                "8cdeb8d8.999788",
                "d7f8c4fb.ea6ad8",
                "da5fb0a7.8c545",
                "6e48c23a.b0701c",
                "94e3cba2.a20498",
                "b2470924.3d1688",
                "49ca05d9.483c5c"
            ],
            [
                "72f1b51c.7e504c"
            ]
        ]
    },
    {
        "id": "5e8604b7.d91a1c",
        "type": "telegram sender",
        "z": "81965ae3.dd08a8",
        "name": "sender",
        "bot": "ca786bad.5ac7a8",
        "haserroroutput": false,
        "outputs": 1,
        "x": 1030,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "72f1b51c.7e504c",
        "type": "function",
        "z": "81965ae3.dd08a8",
        "name": "message",
        "func": "var content = msg.topic+\" :\"+msg.payload;\nif (msg.payload===null){return;}\nvar TelegramChatIds = global.get(\"TelegramChatIds\");\nvar ObjectPayload={\n    \"chatId\": TelegramChatIds,\n    \"type\": \"message\",\n    \"content\":content \n}\nmsg.payload=ObjectPayload;\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 900,
        "y": 380,
        "wires": [
            [
                "5e8604b7.d91a1c"
            ]
        ]
    },
    {
        "id": "45bfc2d4.4b0aec",
        "type": "ui_slider",
        "z": "81965ae3.dd08a8",
        "name": "outside_temp",
        "label": "порог температуры снаружи",
        "tooltip": "порог температуры воздуха снаружи, при которой включается теплый пол {{global.get('temp_outer')}}",
        "group": "7caf40b8.ebe01",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "set_outside_temp",
        "min": 0,
        "max": "25",
        "step": 1,
        "x": 1380,
        "y": 300,
        "wires": [
            [
                "ce15cff2.e9314"
            ]
        ]
    },
    {
        "id": "ce15cff2.e9314",
        "type": "change",
        "z": "81965ae3.dd08a8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp_outside_slider",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1430,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "8dca860d.33d308",
        "type": "change",
        "z": "81965ae3.dd08a8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "temp_outside_slider",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1380,
        "y": 260,
        "wires": [
            [
                "45bfc2d4.4b0aec"
            ]
        ]
    },
    {
        "id": "cfa31919.293f38",
        "type": "inject",
        "z": "81965ae3.dd08a8",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1210,
        "y": 260,
        "wires": [
            [
                "8dca860d.33d308"
            ]
        ]
    },
    {
        "id": "f7f494e6.d6dec8",
        "type": "function",
        "z": "81965ae3.dd08a8",
        "name": "Error",
        "func": "msg.payload = msg.payload+\"\";\nif (msg.payload.startsWith(\"Error:\")){\n\nvar content = msg.topic+\" :\"+msg.payload;\nvar TelegramChatIds = global.get(\"TelegramChatIds\");\nvar ObjectPayload={\n    \"chatId\": TelegramChatIds,\n    \"type\": \"message\",\n    \"content\":content \n}\nmsg.payload=ObjectPayload;\n\n    var nowDate = new Date();\n    var Hour = nowDate.getHours();\n    if ((Hour>2)&&(Hour<6)){\n        return null;\n    }\nreturn msg;\n}\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 310,
        "y": 240,
        "wires": [
            [
                "a84256d.760f5a8"
            ]
        ]
    },
    {
        "id": "a84256d.760f5a8",
        "type": "rbe",
        "z": "81965ae3.dd08a8",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 430,
        "y": 240,
        "wires": [
            [
                "1aa667d0.92ab88"
            ]
        ]
    },
    {
        "id": "1aa667d0.92ab88",
        "type": "telegram sender",
        "z": "81965ae3.dd08a8",
        "name": "sender",
        "bot": "ca786bad.5ac7a8",
        "haserroroutput": false,
        "outputs": 1,
        "x": 550,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "26c3771.2ad2388",
        "type": "inject",
        "z": "81965ae3.dd08a8",
        "name": "",
        "repeat": "10",
        "crontab": "",
        "once": true,
        "onceDelay": "60",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 190,
        "y": 160,
        "wires": [
            [
                "f02311ac.c8019"
            ]
        ]
    },
    {
        "id": "62054911.675008",
        "type": "ui_text",
        "z": "81965ae3.dd08a8",
        "group": "4a84c495.0fce7c",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "теплый пол",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 790,
        "y": 200,
        "wires": []
    },
    {
        "id": "77675f42.b01e6",
        "type": "http request",
        "z": "d8baf37f.71552",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "192.168.1.110/sendAJAX?json={\"t\":7,\"v\":0}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1210,
        "y": 340,
        "wires": [
            [
                "caaab49f.00b618"
            ]
        ]
    },
    {
        "id": "d0a0f55b.f34a48",
        "type": "http request",
        "z": "d8baf37f.71552",
        "name": "включить свет",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1160,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "73b123a9.7a039c",
        "type": "switch",
        "z": "d8baf37f.71552",
        "name": "дет внутри",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 810,
        "y": 380,
        "wires": [
            [
                "710a0cfd.9b6084",
                "7ff3c529.78e03c"
            ],
            []
        ]
    },
    {
        "id": "2ba1d512.35030a",
        "type": "function",
        "z": "d8baf37f.71552",
        "name": "двери",
        "func": "\nfunction returnTrueFalse(message_input_value){\n    if (message_input_value == 1){\n        return true;\n    }\n    else {\n        return false;\n    }\n}\n\nvar parsed =(msg.payload);\nvar stat0 ={payload: parsed.stat[0],topic:\"открытие двери\"};//открытие двери\nvar stat1 ={payload: parsed.stat[1]};//звонок\nvar stat2 ={payload: parsed.stat[2]};//детектор движения\nvar stat3 ={payload: parsed.stat[3]};//3 - домофон питание\nvar stat4 ={payload: parsed.stat[4]};//домофон вкл D4\nvar stat5 ={payload: parsed.stat[5]};//замок D3\nvar stat6 ={payload: parsed.stat[6]};///мощность\n//var stat7 ={payload: returnTrueFalse(parsed.stat[7])};///свет D6\nvar stat7 ={payload: parsed.stat[7]};///свет D6\n\nvar stat8 ={payload: parsed.stat[8],topic:\"детектор внутри\"};\n\nreturn [ stat0, stat1, stat2 , stat3 , stat4 , stat5 , stat6, stat7 , stat8 ];\n\n",
        "outputs": 9,
        "noerr": 0,
        "x": 630,
        "y": 240,
        "wires": [
            [
                "e9876976.3e6738"
            ],
            [
                "c26ba1e0.a9fb"
            ],
            [
                "3a65dada.6bd4a6"
            ],
            [],
            [],
            [],
            [],
            [
                "69920448.0b3e6c"
            ],
            [
                "201a139.6ac00ec"
            ]
        ]
    },
    {
        "id": "3ddbc6cc.585d1a",
        "type": "inject",
        "z": "d8baf37f.71552",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 120,
        "wires": [
            [
                "1c79d414.eb201c"
            ]
        ]
    },
    {
        "id": "1c79d414.eb201c",
        "type": "http request",
        "z": "d8baf37f.71552",
        "name": "двери",
        "method": "GET",
        "ret": "obj",
        "paytoqs": false,
        "url": "http://192.168.1.110/sendAJAX?json={%22t%22:127,%22v%22:0}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 330,
        "y": 180,
        "wires": [
            [
                "2ba1d512.35030a",
                "8df66265.84674",
                "96c70041.ddf5b",
                "13f5ea65.9bdae6"
            ]
        ]
    },
    {
        "id": "13f5ea65.9bdae6",
        "type": "delay",
        "z": "d8baf37f.71552",
        "name": "",
        "pauseType": "rate",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "10",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 160,
        "y": 180,
        "wires": [
            [
                "1c79d414.eb201c"
            ]
        ]
    },
    {
        "id": "710a0cfd.9b6084",
        "type": "function",
        "z": "d8baf37f.71552",
        "name": "hours",
        "func": "var nowDate = new Date();\nvar Hour = nowDate.getHours();\n\n\nif ((Hour>=8)&&(Hour<21)){\n    msg.payload = 1024;\n    msg.url =\"192.168.1.110/sendAJAX?json={'t':7,'v':\"+msg.payload+\"}\";\n    context.set(\"nightLight\",0);\n}\nelse{\n//    msg.payload = 0;\n     msg.url =\"http://192.168.1.112/ws2811AJAX?json={'from':[53,44],'to':[88,88],'type':[2,0],'dir':[0,0],'col':[218,128],'wh':[153,128],'br_':[158,128],'num':2,'sp':11,'dr':255,'fd':60,'fdt':3,'br':132}\";\n    \n     context.set(\"nightLight\",1);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 990,
        "y": 400,
        "wires": [
            [
                "d0a0f55b.f34a48"
            ]
        ]
    },
    {
        "id": "8040b5c5.fe83b8",
        "type": "telegram sender",
        "z": "d8baf37f.71552",
        "name": "send",
        "bot": "ca786bad.5ac7a8",
        "haserroroutput": false,
        "outputs": 1,
        "x": 1210,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "6bcf6f35.9f8da",
        "type": "function",
        "z": "d8baf37f.71552",
        "name": "message",
        "func": "if (msg.payload ==0) return;\nvar content = msg.topic+\" payload:\"+msg.payload;\nvar TelegramChatIds = global.get(\"TelegramChatIds\");\nvar ObjectPayload={\n    \"chatId\": TelegramChatIds,\n    \"type\": \"message\",\n    \"content\":content \n}\nmsg.payload=ObjectPayload;\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1080,
        "y": 40,
        "wires": [
            [
                "8040b5c5.fe83b8"
            ]
        ]
    },
    {
        "id": "7ff3c529.78e03c",
        "type": "function",
        "z": "d8baf37f.71552",
        "name": "multi unit delay",
        "func": "let delay = 300 * 1000;\nvar delayName = 'tout_light';\n    myResetFunction();\n//==================================\n\nfunction myDelayFunction() {\n  let t = setTimeout(myEndFunction, delay);\n  context.set(delayName,t);\n}\n\n\nfunction myEndFunction() {\n  //node.send({payload:Date.now()});\n  node.send({payload:msg.payload});  \n}\n\n\nfunction myResetFunction() {\n  let t = context.get(delayName);    \n  clearTimeout(t);\n  //node.send({payload:Date.now()}); \n  //node.send({payload:context.get('pl'),delay:\"reset\"});   \n}\n\n//==================================\n\n\n\n  //node.send({payload:Date.now()});\n  myDelayFunction();  \n\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "x": 1020,
        "y": 340,
        "wires": [
            [
                "77675f42.b01e6"
            ]
        ]
    },
    {
        "id": "85a25b23.b85418",
        "type": "ui_chart",
        "z": "d8baf37f.71552",
        "name": "",
        "group": "ce3b49b9.4b9e18",
        "order": 3,
        "width": "0",
        "height": "0",
        "label": "Мощность",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "1000",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "x": 1110,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "1faf79cc.dd8616",
        "type": "function",
        "z": "d8baf37f.71552",
        "name": "двери",
        "func": "\nfunction returnTrueFalse(message_input_value){\n    if (message_input_value == 1){\n        return true;\n    }\n    else {\n        return false;\n    }\n}\n\n\nvar parsed =(msg.payload);\nvar stat0 ={payload: parsed.stat[0]};//открытие двери\nvar stat1 ={payload: parsed.stat[1]};//детектор внутри\nvar stat2 ={payload: parsed.stat[2]};//детектор движения\nvar stat3 ={payload: parsed.stat[3]};//3 - домофон питание\nvar stat4 ={payload: parsed.stat[4]};//домофон вкл D4\nvar stat5 ={payload: parsed.stat[5]};//замок D3\nvar stat6 ={payload: Math.round(parsed.stat[6])};///мощность\nvar stat7 ={payload: parsed.stat[7]};///свет D6\nvar stat8 ={payload: parsed.stat[8]};///звонок D7\nstat0.topic=\"открытие двери\";\n\n\nreturn [ stat0, stat1, stat2 , stat3 , stat4 , stat5 , stat6, stat7 , stat8 ];",
        "outputs": 9,
        "noerr": 0,
        "x": 470,
        "y": 600,
        "wires": [
            [
                "8158f60c.c7ae08",
                "1474db80.89ace5"
            ],
            [],
            [
                "810c4549.7f2bf8"
            ],
            [
                "f9a2387d.8a36f8"
            ],
            [
                "bd572e20.917b7"
            ],
            [],
            [
                "ef214024.557a2",
                "1bff1dc2.39f742",
                "4c72e06a.c8d38"
            ],
            [],
            []
        ]
    },
    {
        "id": "3a801b41.e06934",
        "type": "ui_chart",
        "z": "d8baf37f.71552",
        "d": true,
        "name": "",
        "group": "4a84c495.0fce7c",
        "order": 5,
        "width": "0",
        "height": "0",
        "label": "открытие двери",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "604800",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "x": 780,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "d7a8d9e5.37ab08",
        "type": "ui_chart",
        "z": "d8baf37f.71552",
        "d": true,
        "name": "",
        "group": "4a84c495.0fce7c",
        "order": 6,
        "width": "0",
        "height": "0",
        "label": "детектор движения входная дверь",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "x": 890,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "6a20330e.a6eddc",
        "type": "http request",
        "z": "d8baf37f.71552",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.110/sendAJAX?json={%22t%22:4,%22v%22:{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1690,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "50a4d1db.0827",
        "type": "ui_switch",
        "z": "d8baf37f.71552",
        "name": "",
        "label": "камера двери",
        "tooltip": "",
        "group": "6a1fd3d5.2b832c",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "0",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "1",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "x": 1480,
        "y": 500,
        "wires": [
            [
                "d7d8e7da.e057c8"
            ]
        ]
    },
    {
        "id": "d7d8e7da.e057c8",
        "type": "http request",
        "z": "d8baf37f.71552",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.110/sendAJAX?json={%22t%22:3,%22v%22:{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1690,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "8158f60c.c7ae08",
        "type": "ui_button",
        "z": "d8baf37f.71552",
        "d": true,
        "name": "",
        "group": "4a84c495.0fce7c",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Открыть замок",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "0",
        "payloadType": "num",
        "topic": "",
        "x": 660,
        "y": 560,
        "wires": [
            [
                "55b29207.0f9ecc"
            ]
        ]
    },
    {
        "id": "55b29207.0f9ecc",
        "type": "http request",
        "z": "d8baf37f.71552",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.110/sendAJAX?json={%22t%22:5,%22v%22:{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 830,
        "y": 560,
        "wires": [
            [
                "449ade5c.6e0b6"
            ]
        ]
    },
    {
        "id": "b999ad5f.0326b",
        "type": "http request",
        "z": "d8baf37f.71552",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.110/sendAJAX?json={%22t%22:5,%22v%22:1}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1130,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "449ade5c.6e0b6",
        "type": "delay",
        "z": "d8baf37f.71552",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 980,
        "y": 560,
        "wires": [
            [
                "b999ad5f.0326b"
            ]
        ]
    },
    {
        "id": "ef214024.557a2",
        "type": "ui_gauge",
        "z": "d8baf37f.71552",
        "name": "",
        "group": "4b290438.730fbc",
        "order": 3,
        "width": "3",
        "height": "1",
        "gtype": "gage",
        "title": "мощность",
        "label": "кВт",
        "format": "{{value}}",
        "min": 0,
        "max": "5000",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 700,
        "y": 680,
        "wires": []
    },
    {
        "id": "1474db80.89ace5",
        "type": "rbe",
        "z": "d8baf37f.71552",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 630,
        "y": 520,
        "wires": [
            [
                "3a801b41.e06934"
            ]
        ]
    },
    {
        "id": "1bff1dc2.39f742",
        "type": "function",
        "z": "d8baf37f.71552",
        "d": true,
        "name": "message",
        "func": "\nmsg = {\n    \"topic\":\"мощность\"\n}\nvar content = msg.topic+\" кВт:\"+msg.payload;\nvar ObjectPayload={\n    \"chatId\":\"843873284\",\n    \"type\": \"message\",\n    \"content\":content \n}\nmsg.payload=ObjectPayload;\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 680,
        "y": 740,
        "wires": [
            [
                "3e735664.b2bada"
            ]
        ]
    },
    {
        "id": "3e735664.b2bada",
        "type": "telegram sender",
        "z": "d8baf37f.71552",
        "d": true,
        "name": "homeOveralBot",
        "bot": "ca786bad.5ac7a8",
        "haserroroutput": false,
        "outputs": 1,
        "x": 900,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "810c4549.7f2bf8",
        "type": "rbe",
        "z": "d8baf37f.71552",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 650,
        "y": 600,
        "wires": [
            [
                "d7a8d9e5.37ab08"
            ]
        ]
    },
    {
        "id": "8df66265.84674",
        "type": "function",
        "z": "d8baf37f.71552",
        "name": "Error",
        "func": "msg.payload = msg.payload+\"\";\n\nif (msg.payload.startsWith(\"Error:\")){\n    \n    var content = msg.topic+\" :\"+msg.payload;\n    var TelegramChatIds = global.get(\"TelegramChatIds\");\n    var ObjectPayload={\n        \"chatId\": TelegramChatIds,\n        \"type\": \"message\",\n        \"content\":content \n    }\n    msg.payload=ObjectPayload;\n    \n    var nowDate = new Date();\n    var Hour = nowDate.getHours();\n    if ((Hour>2)&&(Hour<6)){\n        return null;\n    }\n    return msg;\n}\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 110,
        "y": 240,
        "wires": [
            [
                "a5754353.794f"
            ]
        ]
    },
    {
        "id": "a5754353.794f",
        "type": "rbe",
        "z": "d8baf37f.71552",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 270,
        "y": 240,
        "wires": [
            [
                "13084678.03de0a"
            ]
        ]
    },
    {
        "id": "13084678.03de0a",
        "type": "telegram sender",
        "z": "d8baf37f.71552",
        "d": true,
        "name": "sender",
        "bot": "",
        "haserroroutput": false,
        "outputs": 1,
        "x": 390,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "96c70041.ddf5b",
        "type": "delay",
        "z": "d8baf37f.71552",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "outputs": 1,
        "x": 290,
        "y": 600,
        "wires": [
            [
                "1faf79cc.dd8616"
            ]
        ]
    },
    {
        "id": "caaab49f.00b618",
        "type": "function",
        "z": "d8baf37f.71552",
        "name": "set context to 0",
        "func": "context.set(\"nightLight\",0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1390,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "19ab148c.73718b",
        "type": "http request",
        "z": "d8baf37f.71552",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.110/ws2811AJAX?json={%22from%22:[0],%22to%22:[88],%22type%22:[3],%22dir%22:[0],%22col%22:[128],%22wh%22:[134],%22br_%22:[255],%22num%22:1,%22sp%22:67,%22dr%22:8,%22fd%22:65,%22fdt%22:3,%22br%22:255}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1000,
        "y": 80,
        "wires": [
            [
                "3634f1cb.343bbe"
            ]
        ]
    },
    {
        "id": "3634f1cb.343bbe",
        "type": "delay",
        "z": "d8baf37f.71552",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 1160,
        "y": 80,
        "wires": [
            [
                "4697a58.e8a825c"
            ]
        ]
    },
    {
        "id": "4697a58.e8a825c",
        "type": "http request",
        "z": "d8baf37f.71552",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.110/ws2811AJAX?json={%22from%22:[0],%22to%22:[88],%22type%22:[3],%22dir%22:[0],%22col%22:[128],%22wh%22:[134],%22br_%22:[255],%22num%22:1,%22sp%22:67,%22dr%22:8,%22fd%22:65,%22fdt%22:3,%22br%22:0}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1310,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "c26ba1e0.a9fb",
        "type": "switch",
        "z": "d8baf37f.71552",
        "d": true,
        "name": "звонок",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 830,
        "y": 80,
        "wires": [
            [
                "6bcf6f35.9f8da",
                "19ab148c.73718b"
            ]
        ]
    },
    {
        "id": "90ff16ae.6a5d38",
        "type": "switch",
        "z": "d8baf37f.71552",
        "name": "дверь открылась",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 890,
        "y": 40,
        "wires": [
            [
                "6bcf6f35.9f8da"
            ]
        ]
    },
    {
        "id": "e9876976.3e6738",
        "type": "rbe",
        "z": "d8baf37f.71552",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 730,
        "y": 40,
        "wires": [
            [
                "90ff16ae.6a5d38",
                "19ab148c.73718b",
                "d0eceeea.617d4"
            ]
        ]
    },
    {
        "id": "4c72e06a.c8d38",
        "type": "delay",
        "z": "d8baf37f.71552",
        "name": "",
        "pauseType": "rate",
        "timeout": "30",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 700,
        "y": 640,
        "wires": [
            [
                "738adba6.83d354"
            ]
        ]
    },
    {
        "id": "d0eceeea.617d4",
        "type": "http request",
        "z": "d8baf37f.71552",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.110/sendAJAX?json={%22t%22:3,%22v%22:0}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 990,
        "y": 240,
        "wires": [
            [
                "80151722.282418"
            ]
        ]
    },
    {
        "id": "7c1235c1.9cd83c",
        "type": "delay",
        "z": "d8baf37f.71552",
        "name": "",
        "pauseType": "delay",
        "timeout": "20",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 1380,
        "y": 240,
        "wires": [
            [
                "2aa4d90d.8a03a6"
            ]
        ]
    },
    {
        "id": "2aa4d90d.8a03a6",
        "type": "http request",
        "z": "d8baf37f.71552",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.110/sendAJAX?json={%22t%22:3,%22v%22:1}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1530,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "3a65dada.6bd4a6",
        "type": "switch",
        "z": "d8baf37f.71552",
        "name": "движ снаружи",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 800,
        "y": 240,
        "wires": [
            [
                "d0eceeea.617d4"
            ]
        ]
    },
    {
        "id": "80151722.282418",
        "type": "function",
        "z": "d8baf37f.71552",
        "name": "reset delay",
        "func": "msg.delay = 20*1000;\nvar m1 = {reset:true};\nreturn [[m1,msg]];",
        "outputs": 1,
        "noerr": 0,
        "x": 1210,
        "y": 240,
        "wires": [
            [
                "7c1235c1.9cd83c"
            ]
        ]
    },
    {
        "id": "5f9e0bcc.7d9844",
        "type": "http request",
        "z": "d8baf37f.71552",
        "name": "включить свет дверь",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "192.168.1.110/sendAJAX?json={\"t\":7,\"v\":{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1240,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "22dd3bfb.89b444",
        "type": "ui_gauge",
        "z": "d8baf37f.71552",
        "name": "Temp",
        "group": "4a84c495.0fce7c",
        "order": 2,
        "width": "3",
        "height": "2",
        "gtype": "donut",
        "title": "Temp",
        "label": "C",
        "format": "{{value}}",
        "min": "-20",
        "max": "30",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 850,
        "y": 800,
        "wires": []
    },
    {
        "id": "721f5b55.02dda4",
        "type": "function",
        "z": "d8baf37f.71552",
        "name": "decode_temp",
        "func": " var wheather=msg.payload;\n\n    var wheather_parse = JSON.parse(wheather);\n    var feels_like = Math.round(wheather_parse.main.feels_like - 273, 15);\n    var temp = Math.round(wheather_parse.main.temp - 273, 15);\n\nmsg.payload = temp;\n\nmsg_wind = {};\nmsg_cloud = {};\n\nmsg_wind.payload = wheather_parse.wind.speed;\nmsg_cloud.payload = wheather_parse.clouds.all;\n\nreturn [msg,msg_wind,msg_cloud];",
        "outputs": 3,
        "noerr": 0,
        "x": 680,
        "y": 820,
        "wires": [
            [
                "22dd3bfb.89b444"
            ],
            [
                "93b19ecc.97eda"
            ],
            [
                "b0a8dcc0.b0bdd"
            ]
        ]
    },
    {
        "id": "b0a8dcc0.b0bdd",
        "type": "ui_text",
        "z": "d8baf37f.71552",
        "group": "4a84c495.0fce7c",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "облачность",
        "format": "{{msg.payload | uppercase}}",
        "layout": "row-spread",
        "x": 880,
        "y": 880,
        "wires": []
    },
    {
        "id": "738adba6.83d354",
        "type": "rbe",
        "z": "d8baf37f.71552",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 890,
        "y": 640,
        "wires": [
            [
                "85a25b23.b85418"
            ]
        ]
    },
    {
        "id": "69920448.0b3e6c",
        "type": "ui_slider",
        "z": "d8baf37f.71552",
        "name": "",
        "label": "свет",
        "tooltip": "",
        "group": "4b290438.730fbc",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "",
        "min": 0,
        "max": "1024",
        "step": 1,
        "x": 910,
        "y": 280,
        "wires": [
            [
                "5f9e0bcc.7d9844"
            ]
        ]
    },
    {
        "id": "f7a58a86.2f5b38",
        "type": "ui_slider",
        "z": "d8baf37f.71552",
        "d": true,
        "name": "",
        "label": "свет коридор",
        "tooltip": "",
        "group": "4b290438.730fbc",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "",
        "topicType": "str",
        "min": 0,
        "max": "1024",
        "step": 1,
        "className": "",
        "x": 1500,
        "y": 580,
        "wires": [
            [
                "6a20330e.a6eddc"
            ]
        ]
    },
    {
        "id": "201a139.6ac00ec",
        "type": "rbe",
        "z": "d8baf37f.71552",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 670,
        "y": 380,
        "wires": [
            [
                "73b123a9.7a039c"
            ]
        ]
    },
    {
        "id": "93b19ecc.97eda",
        "type": "ui_gauge",
        "z": "d8baf37f.71552",
        "name": "",
        "group": "4a84c495.0fce7c",
        "order": 3,
        "width": "6",
        "height": "2",
        "gtype": "gage",
        "title": "ветер",
        "label": "units",
        "format": "{{value}}",
        "min": "1",
        "max": 10,
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 850,
        "y": 840,
        "wires": []
    },
    {
        "id": "f9a2387d.8a36f8",
        "type": "rbe",
        "z": "d8baf37f.71552",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1250,
        "y": 500,
        "wires": [
            [
                "50a4d1db.0827"
            ]
        ]
    },
    {
        "id": "bd572e20.917b7",
        "type": "rbe",
        "z": "d8baf37f.71552",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1310,
        "y": 580,
        "wires": [
            [
                "f7a58a86.2f5b38"
            ]
        ]
    },
    {
        "id": "2c1efa8e.660cf6",
        "type": "e-mail in",
        "z": "d8baf37f.71552",
        "d": true,
        "name": "",
        "protocol": "POP3",
        "server": "pop.meta.ua",
        "useSSL": true,
        "autotls": "never",
        "port": "995",
        "box": "INBOX",
        "disposition": "None",
        "criteria": "UNSEEN",
        "repeat": "300",
        "fetch": "auto",
        "inputs": 0,
        "x": 630,
        "y": 1000,
        "wires": [
            [
                "49718205.87fd1c"
            ]
        ]
    },
    {
        "id": "49718205.87fd1c",
        "type": "function",
        "z": "d8baf37f.71552",
        "name": "message",
        "func": "\nmsg = {\n    \"topic\":\"мощность\"\n}\nvar content = msg.topic+\" кВт:\"+msg.payload;\nvar ObjectPayload={\n    \"chatId\":\"843873284\",\n    \"type\": \"message\",\n    \"content\":content \n}\nmsg.payload=ObjectPayload;\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 800,
        "y": 1000,
        "wires": [
            [
                "916f13e8.6f447"
            ]
        ]
    },
    {
        "id": "916f13e8.6f447",
        "type": "telegram sender",
        "z": "d8baf37f.71552",
        "d": true,
        "name": "homeOveralBot",
        "bot": "ca786bad.5ac7a8",
        "haserroroutput": false,
        "outputs": 1,
        "x": 1000,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "27c53601.bc0ada",
        "type": "http request",
        "z": "d8baf37f.71552",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "persist": false,
        "authType": "",
        "x": 460,
        "y": 940,
        "wires": [
            [
                "721f5b55.02dda4"
            ]
        ]
    },
    {
        "id": "1880f5db.2dcf5a",
        "type": "function",
        "z": "d8baf37f.71552",
        "name": "Request Wheather",
        "func": "var city=\"Radauti\";\nvar APIkey=\"c3e9cf7a63b7fb63e4ee7504ae3dd41e\";\nmsg.url =\"api.openweathermap.org/data/2.5/weather?q=\"+city+\"&appid=\"+APIkey+\"\";\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 260,
        "y": 940,
        "wires": [
            [
                "27c53601.bc0ada"
            ]
        ]
    },
    {
        "id": "81119d7d.27706",
        "type": "inject",
        "z": "d8baf37f.71552",
        "name": "",
        "repeat": "240",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 80,
        "y": 940,
        "wires": [
            [
                "1880f5db.2dcf5a"
            ]
        ]
    },
    {
        "id": "c2949df16e4180e4",
        "type": "ui_gauge",
        "z": "d8baf37f.71552",
        "d": true,
        "name": "Temp",
        "group": "4a84c495.0fce7c",
        "order": 2,
        "width": "3",
        "height": "2",
        "gtype": "donut",
        "title": "Temp",
        "label": "C",
        "format": "{{value}}",
        "min": "-20",
        "max": "30",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "diff": false,
        "className": "",
        "x": 1090,
        "y": 1360,
        "wires": []
    },
    {
        "id": "3fe72a3f14ebbc83",
        "type": "function",
        "z": "d8baf37f.71552",
        "name": "decode_temp",
        "func": " var wheather=msg.payload;\n\n    var wheather_parse = JSON.parse(wheather);\n    var feels_like = Math.round(wheather_parse.main.feels_like - 273, 15);\n    var temp = Math.round(wheather_parse.main.temp - 273, 15);\n\nmsg.payload = temp;\n\n\nmsg_wind.payload = wheather_parse.wind.speed;\nmsg_cloud.payload = wheather_parse.clouds.all;\n\nreturn [msg,msg_wind,msg_cloud];",
        "outputs": 3,
        "timeout": "5",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 920,
        "y": 1380,
        "wires": [
            [
                "c2949df16e4180e4"
            ],
            [
                "32e4ad07d3d59594"
            ],
            [
                "75a283d5ef97e3e4"
            ]
        ]
    },
    {
        "id": "75a283d5ef97e3e4",
        "type": "ui_text",
        "z": "d8baf37f.71552",
        "d": true,
        "group": "4a84c495.0fce7c",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "облачность",
        "format": "{{msg.payload | uppercase}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1120,
        "y": 1440,
        "wires": []
    },
    {
        "id": "32e4ad07d3d59594",
        "type": "ui_gauge",
        "z": "d8baf37f.71552",
        "d": true,
        "name": "",
        "group": "4a84c495.0fce7c",
        "order": 3,
        "width": "6",
        "height": "2",
        "gtype": "gage",
        "title": "ветер",
        "label": "units",
        "format": "{{value}}",
        "min": "1",
        "max": 10,
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "diff": false,
        "className": "",
        "x": 1090,
        "y": 1400,
        "wires": []
    },
    {
        "id": "11b8df50abbbc637",
        "type": "http request",
        "z": "d8baf37f.71552",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "persist": false,
        "authType": "",
        "x": 710,
        "y": 1380,
        "wires": [
            [
                "3fe72a3f14ebbc83"
            ]
        ]
    },
    {
        "id": "6c9218762e233135",
        "type": "function",
        "z": "d8baf37f.71552",
        "name": "Request Wheather forecast",
        "func": "var city=\"Radauti\";\nvar APIkey=\"c3e9cf7a63b7fb63e4ee7504ae3dd41e\";\n//https://pro.openweathermap.org/data/2.5/forecast/hourly?lat={lat}&lon={lon}&appid={API key}\nmsg.url =\"pro.openweathermap.org/data/2.5/forecast/hourly?lat=25.92&lon=47.82&appid=\"+APIkey+\"\";\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 1380,
        "wires": [
            [
                "11b8df50abbbc637"
            ]
        ]
    },
    {
        "id": "deb0ab5af6449058",
        "type": "inject",
        "z": "d8baf37f.71552",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "240",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 260,
        "y": 1380,
        "wires": [
            [
                "6c9218762e233135"
            ]
        ]
    },
    {
        "id": "a2c0301c.0d567",
        "type": "inject",
        "z": "28839e10.005852",
        "d": true,
        "name": "",
        "repeat": "10",
        "crontab": "",
        "once": true,
        "onceDelay": "60",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 60,
        "wires": [
            [
                "c96d2e35.7ad56"
            ]
        ]
    },
    {
        "id": "c96d2e35.7ad56",
        "type": "http request",
        "z": "28839e10.005852",
        "name": "балкон",
        "method": "GET",
        "ret": "obj",
        "paytoqs": false,
        "url": "http://192.168.1.114/sendAJAX?json={%22t%22:127,%22v%22:0}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 280,
        "y": 220,
        "wires": [
            [
                "31a013a1.2ae06c",
                "3cd2ec02.a53314"
            ]
        ]
    },
    {
        "id": "24b6d69f.1343ca",
        "type": "ui_chart",
        "z": "28839e10.005852",
        "name": "",
        "group": "650233e5.37ad3c",
        "order": 4,
        "width": "0",
        "height": "0",
        "label": "температура",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "604800",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "x": 920,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "5dce9b60.cc5bb4",
        "type": "function",
        "z": "28839e10.005852",
        "name": "балкон",
        "func": "var parsed =(msg.payload);\nvar stat1 ={payload: parsed.stat[0]};//увлажнение\nvar stat2 ={payload: parsed.stat[1]};//полив\nvar stat3 ={payload: parsed.stat[2]};//температура\nvar stat4 ={payload: parsed.stat[3]};//влажность\nvar stat8 ={payload: parsed.stat[8]};//цветок1\nstat8.topic=\"flv1\";\nvar stat9 ={payload: parsed.stat[9]};//цветок2\nstat8.payload = (1024 - stat8.payload);\nstat9.topic=\"flv2\";\n\nreturn [ stat1, stat2, stat3 , stat4,stat8,stat9 ];",
        "outputs": 6,
        "noerr": 0,
        "x": 600,
        "y": 240,
        "wires": [
            [
                "f745f494.4819f8"
            ],
            [
                "cb6605bd.0240a8"
            ],
            [
                "763c0049.cb911"
            ],
            [
                "96cc649c.7c3618"
            ],
            [
                "633cdc35.3bdec4"
            ],
            []
        ]
    },
    {
        "id": "f2d51f17.68076",
        "type": "ui_chart",
        "z": "28839e10.005852",
        "d": true,
        "name": "",
        "group": "650233e5.37ad3c",
        "order": 1,
        "width": "0",
        "height": "0",
        "label": "увлажнение",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "604800",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "x": 910,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "ce2dbac2.9ea448",
        "type": "ui_chart",
        "z": "28839e10.005852",
        "d": true,
        "name": "",
        "group": "650233e5.37ad3c",
        "order": 3,
        "width": "0",
        "height": "0",
        "label": "полив",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "604800",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "x": 890,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "d37894e1.5fdca8",
        "type": "ui_chart",
        "z": "28839e10.005852",
        "name": "",
        "group": "650233e5.37ad3c",
        "order": 5,
        "width": "0",
        "height": "0",
        "label": "влажность",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "604800",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "x": 910,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "992bcdf6.5e3c4",
        "type": "http request",
        "z": "28839e10.005852",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": false,
        "url": "192.168.1.114",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1270,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "a95d5dc6.72e65",
        "type": "function",
        "z": "28839e10.005852",
        "name": "saveData",
        "func": "msg.headers = {\n    \"content-type\" : 'multipart/form-data'\n    };\nlet databuffer = msg.payload;\n\nmsg.payload = {\n    \"KEY\": {\n        \"value\": databuffer,\n        \"options\": {\n            \"filename\": \"myfile.png\"\n        }\n    }\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1120,
        "y": 200,
        "wires": [
            [
                "992bcdf6.5e3c4"
            ]
        ]
    },
    {
        "id": "48d37ef2.031a2",
        "type": "function",
        "z": "28839e10.005852",
        "name": "reparse",
        "func": "var parsed =(msg.payload);\nvar stat1 ={payload: parsed.stat[0]};\nvar stat2 ={payload: parsed.stat[1]};\nvar stat3 ={payload: parsed.stat[2]};\nvar stat4 ={payload: parsed.stat[3]};\n\nmsg.payload ={\n\"mode\":\"on\",\n\"humidity\":stat4.payload,\n\"temperature\":stat3.payload\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 720,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "31a013a1.2ae06c",
        "type": "change",
        "z": "28839e10.005852",
        "name": "set topic",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "balcony",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 220,
        "wires": [
            [
                "5dce9b60.cc5bb4",
                "48d37ef2.031a2"
            ]
        ]
    },
    {
        "id": "633cdc35.3bdec4",
        "type": "ui_chart",
        "z": "28839e10.005852",
        "name": "цветок1",
        "group": "7caf40b8.ebe01",
        "order": 3,
        "width": 0,
        "height": 0,
        "label": "цветок1",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "604800",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "x": 900,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "763c0049.cb911",
        "type": "rbe",
        "z": "28839e10.005852",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 770,
        "y": 220,
        "wires": [
            [
                "24b6d69f.1343ca"
            ]
        ]
    },
    {
        "id": "cb6605bd.0240a8",
        "type": "rbe",
        "z": "28839e10.005852",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 770,
        "y": 200,
        "wires": [
            [
                "f2d51f17.68076"
            ]
        ]
    },
    {
        "id": "f745f494.4819f8",
        "type": "rbe",
        "z": "28839e10.005852",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 770,
        "y": 180,
        "wires": [
            [
                "ce2dbac2.9ea448"
            ]
        ]
    },
    {
        "id": "3cd2ec02.a53314",
        "type": "function",
        "z": "28839e10.005852",
        "name": "Error",
        "func": "msg.payload = msg.payload+\"\";\nif (msg.payload.startsWith(\"Error:\")){\n\nvar content = msg.topic+\" :\"+msg.payload;\nvar TelegramChatIds = global.get(\"TelegramChatIds\");\nvar ObjectPayload={\n    \"chatId\": TelegramChatIds,\n    \"type\": \"message\",\n    \"content\":content \n}\nmsg.payload=ObjectPayload;\n\n    var nowDate = new Date();\n    var Hour = nowDate.getHours();\n    if ((Hour>2)&&(Hour<6)){\n        return null;\n    }\nreturn msg;\n}\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 370,
        "y": 320,
        "wires": [
            [
                "f473187f.d45738"
            ]
        ]
    },
    {
        "id": "f473187f.d45738",
        "type": "rbe",
        "z": "28839e10.005852",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 490,
        "y": 320,
        "wires": [
            [
                "2cb691c9.014d1e"
            ]
        ]
    },
    {
        "id": "2cb691c9.014d1e",
        "type": "telegram sender",
        "z": "28839e10.005852",
        "name": "sender",
        "bot": "ca786bad.5ac7a8",
        "haserroroutput": false,
        "outputs": 1,
        "x": 610,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "96cc649c.7c3618",
        "type": "rbe",
        "z": "28839e10.005852",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 770,
        "y": 240,
        "wires": [
            [
                "d37894e1.5fdca8"
            ]
        ]
    },
    {
        "id": "97a52e06.72ca4",
        "type": "inject",
        "z": "28839e10.005852",
        "d": true,
        "name": "полив",
        "repeat": "10800",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "timestamp_interval",
        "payload": "true",
        "payloadType": "bool",
        "x": 220,
        "y": 560,
        "wires": [
            [
                "69f736d3.596688"
            ]
        ]
    },
    {
        "id": "1c87329.0078bcd",
        "type": "http request",
        "z": "28839e10.005852",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "192.168.1.114/sendAJAX?json={\"t\":0,\"v\":{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1150,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "24514965.546da6",
        "type": "delay",
        "z": "28839e10.005852",
        "name": "",
        "pauseType": "delay",
        "timeout": "15",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 780,
        "y": 500,
        "wires": [
            [
                "3988dc38.ea6084"
            ]
        ]
    },
    {
        "id": "3988dc38.ea6084",
        "type": "change",
        "z": "28839e10.005852",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 500,
        "wires": [
            [
                "1c87329.0078bcd"
            ]
        ]
    },
    {
        "id": "391e444a.56a19c",
        "type": "function",
        "z": "28839e10.005852",
        "name": "balcony",
        "func": "var info ={\n    \"payload\":0,\n    \"topic\":\"полив\"\n}\nwatering_count=flow.get('watering_count')\nif (msg.topic==\"force_watering\"){\n     msg.payload=0; \n     info ={\n       \"payload\":\"принудительный полив \"+waterDiff,\n    \"topic\":\"полив\"  \n     }\n}else{\n\nwatering_level=global.get('watering_level');\n\nvar parsed =(msg.payload);\nvar stat1 ={payload: parsed.stat[0]};//полив\nvar stat2 ={payload: parsed.stat[1]};//увлажнение\nvar stat3 ={payload: parsed.stat[2]};//температура\nvar stat4 ={payload: parsed.stat[3]};//влажность\nvar stat8 ={payload: parsed.stat[8]};//цветок1\nstat8.topic=\"flv1\";\nvar stat9 ={payload: parsed.stat[9]};//цветок2\nstat9.topic=\"flv2\";\n    \n    //water1=100-stat8.payload*100/1024;\n    water1=1024-stat8.payload;\n    water2=stat9.payload*100/1024;\n    waterDiff=Math.round(water2-water1);\n    \n//msg.payload=1;\n\n//if ((stat8.payload<300)&&(stat9.payload<300)){\nwatering_count_msg = {}\n\n\nif (water1<watering_level){\n    watering_count++;\n    flow.set('watering_count',watering_count);\n    msg.payload=0;\n    info={\"payload\":\"полив \"+water1+\" watering_count:\" +watering_count,\n    \"topic\":\"полив\"};\n}else{\n    msg.payload=1;\n    info.payload =\"полива не было \"+waterDiff;\n    info=null;\n}\n}\nwatering_count_msg.payload = watering_count;\nreturn [msg,info,watering_count_msg];",
        "outputs": 3,
        "noerr": 0,
        "x": 540,
        "y": 480,
        "wires": [
            [
                "1c87329.0078bcd",
                "24514965.546da6"
            ],
            [
                "88dda9ca.561958"
            ],
            [
                "970c1dbd.c4ccd"
            ]
        ]
    },
    {
        "id": "69f736d3.596688",
        "type": "http request",
        "z": "28839e10.005852",
        "name": "balcony",
        "method": "GET",
        "ret": "obj",
        "paytoqs": false,
        "url": "http://192.168.1.114/sendAJAX?json={%22t%22:127,%22v%22:0}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 360,
        "y": 560,
        "wires": [
            [
                "391e444a.56a19c"
            ]
        ]
    },
    {
        "id": "7c0e305a.52c72",
        "type": "ui_button",
        "z": "28839e10.005852",
        "name": "",
        "group": "650233e5.37ad3c",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Полив",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "force_watering",
        "x": 330,
        "y": 480,
        "wires": [
            [
                "391e444a.56a19c"
            ]
        ]
    },
    {
        "id": "103cd40c.7b73ec",
        "type": "telegram sender",
        "z": "28839e10.005852",
        "name": "send_watering",
        "bot": "ca786bad.5ac7a8",
        "haserroroutput": false,
        "outputs": 1,
        "x": 960,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "88dda9ca.561958",
        "type": "function",
        "z": "28839e10.005852",
        "name": "message",
        "func": "var content = msg.topic+\" payload:\"+msg.payload;\nvar TelegramChatIds = global.get(\"TelegramChatIds\");\nvar ObjectPayload={\n    \"chatId\": TelegramChatIds,\n    \"type\": \"message\",\n    \"content\":content \n}\nmsg.payload=ObjectPayload;\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 780,
        "y": 540,
        "wires": [
            [
                "103cd40c.7b73ec"
            ]
        ]
    },
    {
        "id": "21a20373.64c3bc",
        "type": "ui_slider",
        "z": "28839e10.005852",
        "name": "watering_level",
        "label": "вл почвы",
        "tooltip": "",
        "group": "7caf40b8.ebe01",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "",
        "min": "0",
        "max": "1024",
        "step": 1,
        "x": 740,
        "y": 420,
        "wires": [
            [
                "b3923436.280238"
            ]
        ]
    },
    {
        "id": "b3923436.280238",
        "type": "change",
        "z": "28839e10.005852",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "watering_level",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 950,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "f5d25ccf.ce731",
        "type": "change",
        "z": "28839e10.005852",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "watering_level",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 420,
        "wires": [
            [
                "21a20373.64c3bc"
            ]
        ]
    },
    {
        "id": "d2669128.7b4f",
        "type": "inject",
        "z": "28839e10.005852",
        "d": true,
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 390,
        "y": 420,
        "wires": [
            [
                "f5d25ccf.ce731"
            ]
        ]
    },
    {
        "id": "3a4fed48.834222",
        "type": "function",
        "z": "28839e10.005852",
        "name": "Decode Weather",
        "func": " var wheather=msg.payload;\n var nowDate = new Date();\n var Hour = nowDate.getHours();\n \n//var day = context.get(\"day\");   \n var nowBright=5;\n\nif ((Hour>=8)&&(Hour<21)){\n    nowBright=10;\n}\n \n \n    //var wheather = \"{\\\"coord\\\":{\\\"lon\\\":34.9833,\\\"lat\\\":48.45},\\\"weather\\\":[{\\\"id\\\":500,\\\"main\\\":\\\"Rain\\\",\\\"description\\\":\\\"light rain\\\",\\\"icon\\\":\\\"10d\\\"},{\\\"id\\\":701,\\\"main\\\":\\\"Mist\\\",\\\"description\\\":\\\"mist\\\",\\\"icon\\\":\\\"50d\\\"}],\\\"base\\\":\\\"stations\\\",\\\"main\\\":{\\\"temp\\\":279.48,\\\"feels_like\\\":275.13,\\\"temp_min\\\":279.15,\\\"temp_max\\\":279.82,\\\"pressure\\\":1002,\\\"humidity\\\":100},\\\"visibility\\\":3500,\\\"wind\\\":{\\\"speed\\\":5,\\\"deg\\\":190},\\\"rain\\\":{\\\"1h\\\":0.11},\\\"clouds\\\":{\\\"all\\\":75},\\\"dt\\\":1612449242,\\\"sys\\\":{\\\"type\\\":1,\\\"id\\\":8901,\\\"country\\\":\\\"UA\\\",\\\"sunrise\\\":1612415098,\\\"sunset\\\":1612449779},\\\"timezone\\\":7200,\\\"id\\\":709930,\\\"name\\\":\\\"Dnipro\\\",\\\"cod\\\":200}\";\n    // var wheather2=\"{\\\"coord\\\":{\\\"lon\\\":34.9833,\\\"lat\\\":48.45},\\\"weather\\\":[{\\\"id\\\":803,\\\"main\\\":\\\"Clouds\\\",\\\"description\\\":\\\"broken clouds\\\",\\\"icon\\\":\\\"04n\\\"}],\\\"base\\\":\\\"stations\\\",\\\"main\\\":{\\\"temp\\\":267.1,\\\"feels_like\\\":257.04,\\\"temp_min\\\":267.04,\\\"temp_max\\\":267.15,\\\"pressure\\\":1018,\\\"humidity\\\":73},\\\"visibility\\\":10000,\\\"wind\\\":{\\\"speed\\\":10,\\\"deg\\\":320},\\\"clouds\\\":{\\\"all\\\":75},\\\"dt\\\":1612555439,\\\"sys\\\":{\\\"type\\\":1,\\\"id\\\":8901,\\\"country\\\":\\\"UA\\\",\\\"sunrise\\\":1612501412,\\\"sunset\\\":1612536277},\\\"timezone\\\":7200,\\\"id\\\":709930,\\\"name\\\":\\\"Dnipro\\\",\\\"cod\\\":200}\";\n    // var wheather3=\"{\\\"coord\\\":{\\\"lon\\\":34.9833,\\\"lat\\\":48.45},\\\"weather\\\":[{\\\"id\\\":800,\\\"main\\\":\\\"Clear\\\",\\\"description\\\":\\\"clear sky\\\",\\\"icon\\\":\\\"01d\\\"}],\\\"base\\\":\\\"stations\\\",\\\"main\\\":{\\\"temp\\\":269.43,\\\"feels_like\\\":263.53,\\\"temp_min\\\":268.71,\\\"temp_max\\\":270.15,\\\"pressure\\\":1016,\\\"humidity\\\":59},\\\"visibility\\\":10000,\\\"wind\\\":{\\\"speed\\\":4,\\\"deg\\\":290},\\\"clouds\\\":{\\\"all\\\":0},\\\"dt\\\":1612612299,\\\"sys\\\":{\\\"type\\\":1,\\\"id\\\":8901,\\\"country\\\":\\\"UA\\\",\\\"sunrise\\\":1612587724,\\\"sunset\\\":1612622776},\\\"timezone\\\":7200,\\\"id\\\":709930,\\\"name\\\":\\\"Dnipro\\\",\\\"cod\\\":200}\";\n    var wheather_parse = JSON.parse(wheather);\n    var feels_like = Math.round(wheather_parse.main.feels_like - 273, 15);\n    var temp = Math.round(wheather_parse.main.temp - 273, 15);\n    var signigicant_wheather = 0;\n    if (wheather_parse.weather[0].main === ('Rain')) {\n        signigicant_wheather = 4;\n    } else if (wheather_parse.weather[0].main === ('Clouds')) {\n        signigicant_wheather = 1;\n    } else if (wheather_parse.weather[0].main === ('Snow')) {\n        signigicant_wheather = 5;\n    } else if (wheather_parse.weather[0].main === ('Clear')) {\n        signigicant_wheather = 0;//Clear\n    }\n\n    //console.log(wheather_parse.weather[0].main===('Clear'));\n    var main = (wheather_parse.weather)[0].description;\n    var wind = (wheather_parse.wind.speed);\n    var wind_dir = (wheather_parse.wind.deg);\n    var sunrise=(new Date(wheather_parse.sys.sunrise*1000).getHours()*60+(new Date(wheather_parse.sys.sunrise*1000).getMinutes()));\n    var sunset=(new Date(wheather_parse.sys.sunset*1000).getHours()*60+(new Date(wheather_parse.sys.sunset*1000).getMinutes()));\n    var nowtime=(new Date().getHours()*60+(new Date().getMinutes()));\n    var isSunrise = ((sunrise)<(nowtime)&&((sunset)>(nowtime)))?255:255;\n    //var isSunrise = ((sunrise)<(nowtime)&&((sunset)>(nowtime)))?:100;\n\n    function getMinMax(value, minOutput, maxOutput, maxInput) {\n        var middle = 0;\n        middle = Math.round((value - minOutput) * maxInput / (maxOutput - minOutput));\n        return middle;\n    }\n\n    var ws8211 = \"{\\\"from\\\":[0],\\\"to\\\":[88],\\\"type\\\":[1],\\\"dir\\\":[0],\\\"col\\\":[0],\\\"wh\\\":[128],\\\"br_\\\":[230],\\\"num\\\":1,\\\"sp\\\":254,\\\"dr\\\":255,\\\"fd\\\":4,\\\"fdt\\\":3,\\\"br\\\":255}\";\n    var JsonString = {};\n\n    JsonString.from = [0];\n    //JsonString.g1 = g1;\n    JsonString.to = [41];\n    JsonString.type = [signigicant_wheather];\n    JsonString.dir = [wind_dir < 180 ? 0 : 1];\n    JsonString.col = [getMinMax(temp, -20, 40, 255)];\n    JsonString.wh = [255];\n    JsonString.br_ = [isSunrise];\n    JsonString.num = 1;\n    JsonString.sp = 15-getMinMax(wind, 0, 15, 255);\n    JsonString.dr = 255;\n    JsonString.fd = ((signigicant_wheather === 1) || (signigicant_wheather === 0)) ? 100 : 100;\n    JsonString.fdt = 3;\n    JsonString.br = 10;\n    JsonString.inv = 0;\n    JsonString.ws8211_loop = 1;\n        var JsonString_bathroom = JsonString;\n        JsonString_bathroom.inv=0;\n        JsonString_bathroom.to = [88];\n        JsonString_bathroom.br = nowBright;\n// var msg_bathroom=msg;\n// var msg_balcony=msg;\n\n    var url_balcony = \"http://192.168.1.111/ws2811AJAX?json=\"+JSON.stringify(JsonString);\n    var url_bathroom = \"http://192.168.1.112/ws2811AJAX?json=\"+JSON.stringify(JsonString_bathroom);\n    // var AjaxFormat_balcony = url_balcony;\n    // var AjaxFormat_bathroom = url_bathroom;\n    //console.log(AjaxFormat_balcony);\n    var add = \"json=\";\n    msg_balcony={\n       \"url\" : url_balcony\n    }\n    msg_bathroom={\n       \"url\" : url_bathroom\n    }\n    // msg_balcony.url = AjaxFormat_balcony;\n    // msg_bathroom.url = AjaxFormat_bathroom;\n    // msg_bathroom.payload = JSON.stringify(JsonString_bathroom);\n    // msg_balcony.payload = JSON.stringify(JsonString);\n\n    //return msg;\n    //console.log(AjaxFormat);\n   // msg.url = AjaxFormat;\n    var temp_obj={\n        \"payload\":temp,\n        \"topic\":\"temp\"\n    }\n        var temp_feels_like={\n        \"payload\":feels_like,\n        \"topic\":\"feels_like\"\n    }\n    var pressure_lvl={\n        \"payload\":wheather_parse.main.pressure,\n        \"topic\":\"press\"\n    }\n\n//return [temp_obj,[msg_bathroom,msg_balcony]];\nreturn [temp_obj,msg_bathroom,temp_feels_like,pressure_lvl];",
        "outputs": 4,
        "noerr": 0,
        "x": 810,
        "y": 720,
        "wires": [
            [
                "947220b8.5ab7",
                "b00859a3.b0e688"
            ],
            [
                "f5ca3e9d.325bc",
                "7aa502be.442e6c"
            ],
            [
                "b10cc0d2.736d6"
            ],
            [
                "26faf60e.0b6f5a"
            ]
        ]
    },
    {
        "id": "f5ca3e9d.325bc",
        "type": "http request",
        "z": "28839e10.005852",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": true,
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 740,
        "wires": [
            [
                "735d5574.6d78ec"
            ]
        ]
    },
    {
        "id": "947220b8.5ab7",
        "type": "change",
        "z": "28839e10.005852",
        "name": "set temp",
        "rules": [
            {
                "t": "set",
                "p": "temp_outer",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1020,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "b00859a3.b0e688",
        "type": "ui_text",
        "z": "28839e10.005852",
        "group": "7caf40b8.ebe01",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Температура снаружи",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 1040,
        "y": 660,
        "wires": []
    },
    {
        "id": "7aa502be.442e6c",
        "type": "debug",
        "z": "28839e10.005852",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1250,
        "y": 720,
        "wires": []
    },
    {
        "id": "735d5574.6d78ec",
        "type": "debug",
        "z": "28839e10.005852",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1250,
        "y": 760,
        "wires": []
    },
    {
        "id": "5309f0b6.903d4",
        "type": "http request",
        "z": "28839e10.005852",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "192.168.1.114/sendAJAX?json={\"t\":0,\"v\":0}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 630,
        "y": 880,
        "wires": [
            [
                "9b00bd77.0d105"
            ]
        ]
    },
    {
        "id": "9b00bd77.0d105",
        "type": "delay",
        "z": "28839e10.005852",
        "name": "",
        "pauseType": "delay",
        "timeout": "15",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 780,
        "y": 880,
        "wires": [
            [
                "46a52d1e.1164c4"
            ]
        ]
    },
    {
        "id": "46a52d1e.1164c4",
        "type": "http request",
        "z": "28839e10.005852",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "192.168.1.114/sendAJAX?json={\"t\":0,\"v\":1}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 950,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "75d9fd51.822df4",
        "type": "inject",
        "z": "28839e10.005852",
        "d": true,
        "name": "",
        "repeat": "",
        "crontab": "00 16 * * *",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "It is 4pm on a weekday!",
        "payloadType": "str",
        "x": 270,
        "y": 880,
        "wires": [
            [
                "5309f0b6.903d4"
            ]
        ]
    },
    {
        "id": "45760aec.d00ff4",
        "type": "function",
        "z": "28839e10.005852",
        "name": "Request Wheather",
        "func": "var city=\"Dnipro\";\nvar lat=\"48\";\nvar lon=\"35\";\nvar APIkey=\"c3e9cf7a63b7fb63e4ee7504ae3dd41e\";\n//msg.url =\"api.openweathermap.org/data/2.5/forecast?lat=\"+lat+\"&lon=\"+lon+\"&appid=\"+APIkey+\"\";\nmsg.url =\"api.openweathermap.org/data/2.5/forecast?q=\"+city+\"&appid=\"+APIkey+\"\";\n\n//\"api.openweathermap.org/data/2.5/forecast?lat=35&lon=139&appid={API key}\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 410,
        "y": 940,
        "wires": [
            [
                "56ce10cd.6d305"
            ]
        ]
    },
    {
        "id": "56ce10cd.6d305",
        "type": "http request",
        "z": "28839e10.005852",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "persist": false,
        "authType": "",
        "x": 630,
        "y": 940,
        "wires": [
            [
                "dc52979f.f8b648"
            ]
        ]
    },
    {
        "id": "dc52979f.f8b648",
        "type": "debug",
        "z": "28839e10.005852",
        "name": "forecast",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 820,
        "y": 940,
        "wires": []
    },
    {
        "id": "a266102.6b1fef",
        "type": "inject",
        "z": "28839e10.005852",
        "d": true,
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 940,
        "wires": [
            [
                "45760aec.d00ff4"
            ]
        ]
    },
    {
        "id": "970c1dbd.c4ccd",
        "type": "ui_text",
        "z": "28839e10.005852",
        "group": "cad186fc.6717b8",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "text",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 770,
        "y": 580,
        "wires": []
    },
    {
        "id": "b10cc0d2.736d6",
        "type": "ui_text",
        "z": "28839e10.005852",
        "group": "4b290438.730fbc",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "чувствуется как",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1040,
        "y": 800,
        "wires": []
    },
    {
        "id": "26faf60e.0b6f5a",
        "type": "ui_text",
        "z": "28839e10.005852",
        "group": "4b290438.730fbc",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "давление",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1030,
        "y": 840,
        "wires": []
    },
    {
        "id": "5d2d4b0b.6fa5d4",
        "type": "http request",
        "z": "c22de8d6.aec338",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "192.168.1.112/sendAJAX?json={\"t\":5,\"v\":{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 2430,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "e3288d98.51ec",
        "type": "ui_switch",
        "z": "c22de8d6.aec338",
        "name": "",
        "label": "вентилятор в ванной",
        "tooltip": "",
        "group": "6a1fd3d5.2b832c",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "0",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "1",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "x": 1920,
        "y": 80,
        "wires": [
            [
                "ffa92552.c3da98"
            ]
        ]
    },
    {
        "id": "415281ff.6cde2",
        "type": "ui_switch",
        "z": "c22de8d6.aec338",
        "d": true,
        "name": "",
        "label": "вентилятор в ванной правый",
        "tooltip": "",
        "group": "6a1fd3d5.2b832c",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "0",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "1",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "x": 1950,
        "y": 120,
        "wires": [
            [
                "ffa92552.c3da98"
            ]
        ]
    },
    {
        "id": "6b0e4d93.7d1364",
        "type": "http request",
        "z": "c22de8d6.aec338",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "192.168.1.112/sendAJAX?json={\"t\":6,\"v\":{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 2430,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "58f0e60.a21ef1c",
        "type": "http request",
        "z": "c22de8d6.aec338",
        "name": "ванна",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "192.168.1.112/sendAJAX?json={%22t%22:127,%22v%22:0}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 630,
        "y": 120,
        "wires": [
            [
                "b0d2b1bc.f6b7b",
                "3d0c3911.66aca6",
                "1adb7178.aefdaf",
                "11148168.90380f"
            ]
        ]
    },
    {
        "id": "b0d2b1bc.f6b7b",
        "type": "function",
        "z": "c22de8d6.aec338",
        "name": "Bathroom",
        "func": "\nvar parsed =(msg.payload);\n\nvar stat0={\n    \"payload\":0,\n    \"topic\":0\n};\nvar stat2={\n  \"payload\":0,\n    \"topic\":\"humidity\"  \n};\n\nstat0.payload =parsed.stat[0];//движение\nstat2.payload =parsed.stat[2];//влажность\n\nvar stat1 ={payload: parsed.stat[1]};//температура\nvar stat3 ={payload: parsed.stat[3]};//3\nvar stat4 ={payload: parsed.stat[4]};//колонки\nvar stat5 ={payload: parsed.stat[5]};//вентилятор леввый\nvar stat6 ={payload: parsed.stat[6]};//вентилятор правый\n\nvar DealyMessageOff={\n    topic:\"fans\",\n    payload:1};    \nif ((stat5.payload===0)||(stat6.payload===0)){\nDealyMessageOff.payload=0;    \n}else{\nDealyMessageOff.payload=1;  \n}\n\nstat0.topic = \"move\";\nstat2.topic = \"humidity\";\n\nhttpreq = {\n    \"topic\":\"\",\n    \"payload\":\"\",\n    \"url\":\"\"\n}\nhttpreq.url=\"http://192.168.1.112/sendAJAX?json={\\\"t\\\":127,\\\"v\\\":0}\";\nvar httreq_ch = false;\nhttpreq = null;\nreturn [ stat0, stat1, stat2,stat4,stat5,stat6,DealyMessageOff,httpreq ];",
        "outputs": 8,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 800,
        "y": 120,
        "wires": [
            [
                "ce779d77.68f7e",
                "1d07a799.fe9c08",
                "284a2937.bc1d46"
            ],
            [],
            [
                "284a2937.bc1d46"
            ],
            [
                "45d05603.04f3b8"
            ],
            [
                "e3288d98.51ec"
            ],
            [
                "415281ff.6cde2"
            ],
            [
                "dd0305c.c86b2f8"
            ],
            [
                "6707ea60.23c944"
            ]
        ]
    },
    {
        "id": "3d0c3911.66aca6",
        "type": "function",
        "z": "c22de8d6.aec338",
        "name": "Error",
        "func": "var nowDate = new Date();\nvar Hour = nowDate.getHours();\n\n\n\n\n\n\n\nmsg.payload = msg.payload+\"\";\nif (msg.payload.startsWith(\"Error:\")){\n    var content = msg.topic+\" :\"+msg.payload;\n    var ObjectPayload={\n        \"chatId\": \"843873284\",\n        \"type\": \"message\",\n        \"content\":content \n    }\n    msg.payload=ObjectPayload;\n    \n    if ((Hour>2)&&(Hour<6)){\n        return null;\n    }\nreturn msg;\n}\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "x": 1230,
        "y": 320,
        "wires": [
            [
                "4d33eadd.574ec4"
            ]
        ]
    },
    {
        "id": "1e6d8328.482d4d",
        "type": "telegram sender",
        "z": "c22de8d6.aec338",
        "name": "sender",
        "bot": "ca786bad.5ac7a8",
        "haserroroutput": false,
        "outputs": 1,
        "x": 1510,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "4d33eadd.574ec4",
        "type": "rbe",
        "z": "c22de8d6.aec338",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1370,
        "y": 320,
        "wires": [
            [
                "1e6d8328.482d4d"
            ]
        ]
    },
    {
        "id": "332fa0c1.b0916",
        "type": "delay",
        "z": "c22de8d6.aec338",
        "name": "",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 1440,
        "y": 160,
        "wires": [
            [
                "54d2298b.6fead8"
            ]
        ]
    },
    {
        "id": "c63ce770.7ae7e8",
        "type": "function",
        "z": "c22de8d6.aec338",
        "name": "reset delay",
        "func": "var m1 = {\n    reset: true,\n    payload: msg.payload,\n    topic: msg.topic\n};\n\nif (msg.topic == \"move\") {\n    msg.delay = 3 * 1000 * 10;\n    if (context.get(\"fanson\") === false){\n        msg.payload = 0;\n        //return [[m1, msg]];\n    }else{\n        //return [m1];\n    }\n\n}\nelse if (msg.topic == \"Hum\") {\n    msg.delay = 15 * 1000 * 60;\n    return [[m1, msg]];\n} else if (msg.topic == \"fans\"){\n    if ((msg.payload === 0)&&(context.get(\"fanson\") === false)){\n        context.set(\"fanson\",true); // to store a variable\n        msg.delay = 30 * 1000 * 60;\n        return [[m1, msg]];\n    }\n    if (msg.payload === 1){\n        context.set(\"fanson\",false);\n        return [msg];\n    }\n}\n//flow.set(\"block_http_request\",1);\n\n//return [msg];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1210,
        "y": 160,
        "wires": [
            [
                "332fa0c1.b0916",
                "7d994b16.df55f4",
                "6529ab1c.69c634",
                "e3288d98.51ec"
            ]
        ]
    },
    {
        "id": "64f89124.725fc",
        "type": "function",
        "z": "c22de8d6.aec338",
        "name": "hours",
        "func": "var nowDate = new Date();\nvar Hour = nowDate.getHours();\n\n\nif ((Hour>=8)&&(Hour<=21)){\n    msg.payload = 0;\n    //msg.url =\"192.168.1.110/sendAJAX?json={'t':7,'v':\"+msg.payload+\"}\";\n    //context.set(\"fun\",0);\n    return msg;\n}\nelse{\n    //msg.payload = 0;\n     //msg.url =\"http://192.168.1.112/ws2811AJAX?json={'from':[53,44],'to':[88,88],'type':[2,0],'dir':[0,0],'col':[218,128],'wh':[153,128],'br_':[158,128],'num':2,'sp':11,'dr':255,'fd':60,'fdt':3,'br':132}\";\n    \n     //context.set(\"fun\",1);\n     flow.set(\"block_http_request\",0); \n     return null\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 1470,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "11148168.90380f",
        "type": "delay",
        "z": "c22de8d6.aec338",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 630,
        "y": 220,
        "wires": [
            [
                "58f0e60.a21ef1c"
            ]
        ]
    },
    {
        "id": "ce779d77.68f7e",
        "type": "function",
        "z": "c22de8d6.aec338",
        "d": true,
        "name": "switch",
        "func": "var msg2 = msg;\n//context.set(\"fun_bathroom\",100);\nvar block_http_request = flow.get(\"block_http_request\");  \n\nif ((msg.payload === 0)&&(block_http_request === 0)){\n    flow.set(\"block_http_request\",1);  \n    //turn on\n    msg.payload = 1;\n    //context.set(\"fun_bathroom\",1);\n    msg2 = null;\n  return [msg,msg2];\n}\n\nif ((msg.payload === 1)&&(block_http_request === 0)){\n    msg2.payload = 1;\n    //flow.set(\"block_http_request\",1);  \n    //msg2.topic = fun_turned_on;\n    //flow.set(\"fun_bathroom_1\",1); \n    msg = null;\n   return [msg,msg2];\n}\n\n\n//return [msg,msg2];\n",
        "outputs": 2,
        "noerr": 0,
        "x": 1210,
        "y": 380,
        "wires": [
            [
                "64f89124.725fc"
            ],
            [
                "11148168.90380f"
            ]
        ]
    },
    {
        "id": "500d751f.8bff9c",
        "type": "inject",
        "z": "c22de8d6.aec338",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 410,
        "y": 100,
        "wires": [
            [
                "58f0e60.a21ef1c"
            ]
        ]
    },
    {
        "id": "de06e881.1a9898",
        "type": "inject",
        "z": "c22de8d6.aec338",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 1050,
        "y": 380,
        "wires": [
            [
                "ce779d77.68f7e"
            ]
        ]
    },
    {
        "id": "7f3925e2.e6c56c",
        "type": "function",
        "z": "c22de8d6.aec338",
        "name": "Bathroom",
        "func": "\nvar parsed =(msg.payload);\n\nvar stat0={\n    \"payload\":0,\n    \"topic\":0\n};\nvar stat2={};\n\nstat0.payload =parsed.stat[0];//движение\nstat2.payload =parsed.stat[2];//влажность\n\nvar stat1 ={payload: parsed.stat[1]};//температура\nvar stat3 ={payload: parsed.stat[3]};//3\nvar stat4 ={payload: parsed.stat[4]};//колонки\nvar stat5 ={payload: parsed.stat[5]};//вентилятор леввый\nvar stat6 ={payload: parsed.stat[6]};//вентилятор правый\n\nvar DealyMessageOff={\n    topic:\"\",\n    payload:1};    \nif ((stat4.payload===0)||(stat5.payload===0)||(stat6.payload===0)){\nDealyMessageOff.payload=0;    \n}\n\nstat0.topic = \"move\";\nstat2.topic = \"humidity\";\nreturn [ stat0, stat1, stat2,stat4,stat5,DealyMessageOff ];",
        "outputs": 6,
        "noerr": 0,
        "x": 960,
        "y": 460,
        "wires": [
            [
                "9999acf2.800ba"
            ],
            [
                "cafd095e.217f68"
            ],
            [
                "79c54a55.c9c7a4"
            ],
            [],
            [],
            []
        ]
    },
    {
        "id": "1adb7178.aefdaf",
        "type": "delay",
        "z": "c22de8d6.aec338",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "outputs": 1,
        "x": 790,
        "y": 480,
        "wires": [
            [
                "7f3925e2.e6c56c"
            ]
        ]
    },
    {
        "id": "eb0f831d.f0bb7",
        "type": "ui_chart",
        "z": "c22de8d6.aec338",
        "name": "",
        "group": "cad186fc.6717b8",
        "order": 2,
        "width": "0",
        "height": "0",
        "label": "Температура в ванной",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "604800",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "x": 1310,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "3a859d97.67a8b2",
        "type": "ui_chart",
        "z": "c22de8d6.aec338",
        "name": "",
        "group": "cad186fc.6717b8",
        "order": 1,
        "width": "0",
        "height": "0",
        "label": "движение в ванной",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "604800",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "x": 1300,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "1d07a799.fe9c08",
        "type": "switch",
        "z": "c22de8d6.aec338",
        "d": true,
        "name": "switch if 0",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 960,
        "y": 320,
        "wires": [
            [
                "64f89124.725fc"
            ],
            [
                "11148168.90380f"
            ]
        ]
    },
    {
        "id": "fd92a9b4.236e48",
        "type": "function",
        "z": "c22de8d6.aec338",
        "d": true,
        "name": "multi unit delay",
        "func": "let delay = 30* 60 * 1000;\nvar delayName = 'bathroom';\n    myResetFunction();\n//==================================\n\nfunction myDelayFunction() {\n  let t = setTimeout(myEndFunction, delay);\n  context.set(delayName,t);\n}\n\n\nfunction myEndFunction() {\n  //node.send({payload:Date.now()});\n  node.send({payload:msg.payload});  \n}\n\n\nfunction myResetFunction() {\n  let t = context.get(delayName);    \n  clearTimeout(t);\n  //node.send({payload:Date.now()}); \n  //node.send({payload:context.get('pl'),delay:\"reset\"});   \n}\n\n//==================================\n\n\n\n  //node.send({payload:Date.now()});\n  myDelayFunction();  \n\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "x": 1220,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "9999acf2.800ba",
        "type": "rbe",
        "z": "c22de8d6.aec338",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1110,
        "y": 440,
        "wires": [
            [
                "3a859d97.67a8b2"
            ]
        ]
    },
    {
        "id": "cafd095e.217f68",
        "type": "rbe",
        "z": "c22de8d6.aec338",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1110,
        "y": 460,
        "wires": [
            [
                "eb0f831d.f0bb7"
            ]
        ]
    },
    {
        "id": "79c54a55.c9c7a4",
        "type": "rbe",
        "z": "c22de8d6.aec338",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1110,
        "y": 480,
        "wires": [
            [
                "451296fc.c6f218"
            ]
        ]
    },
    {
        "id": "284a2937.bc1d46",
        "type": "function",
        "z": "c22de8d6.aec338",
        "name": "влажность если больше",
        "func": "var nowDate = new Date();\nvar bath = \"turned_bathroom_by_hum\"\nvar Hour = nowDate.getHours();\nvar msg1 = msg;\n\nhum_level = global.get('bath_hum');\nif ((Hour > 7) && (Hour <= 23)) {\n    if (msg.payload > hum_level) {\n        flow.set(bath, 1);\n        msg1.topic = \"Hum\";\n        msg1.payload = 0;\n        return msg1;\n    }\n    if ((msg.topic == \"move\") && (msg.payload == '0')) {\n        msg1 = msg;\n        return null;\n    }\n}\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "x": 1070,
        "y": 40,
        "wires": [
            [
                "c63ce770.7ae7e8",
                "fd92a9b4.236e48",
                "e3288d98.51ec",
                "415281ff.6cde2"
            ]
        ]
    },
    {
        "id": "34c3d0cb.6472f",
        "type": "ui_slider",
        "z": "c22de8d6.aec338",
        "name": "slider_hum",
        "label": "max Влажность",
        "tooltip": "",
        "group": "6a1fd3d5.2b832c",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "",
        "min": "40",
        "max": "100",
        "step": 1,
        "x": 2470,
        "y": 200,
        "wires": [
            [
                "106b881a.b493c8"
            ]
        ]
    },
    {
        "id": "106b881a.b493c8",
        "type": "change",
        "z": "c22de8d6.aec338",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "bath_hum",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2680,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "ecb5ff90.4eb42",
        "type": "change",
        "z": "c22de8d6.aec338",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "bath_hum",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2280,
        "y": 200,
        "wires": [
            [
                "34c3d0cb.6472f"
            ]
        ]
    },
    {
        "id": "e63cbe6.6d20a4",
        "type": "inject",
        "z": "c22de8d6.aec338",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2090,
        "y": 200,
        "wires": [
            [
                "ecb5ff90.4eb42"
            ]
        ]
    },
    {
        "id": "f8d48c34.0cbdc",
        "type": "inject",
        "z": "c22de8d6.aec338",
        "name": "at 23:20",
        "repeat": "",
        "crontab": "20 23 * * *",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "1",
        "payloadType": "str",
        "x": 1420,
        "y": 220,
        "wires": [
            [
                "54d2298b.6fead8",
                "1349b35a.eedded"
            ]
        ]
    },
    {
        "id": "7d994b16.df55f4",
        "type": "function",
        "z": "c22de8d6.aec338",
        "d": true,
        "name": "variable set bathroom",
        "func": "msg.payload = msg.payload+\"\";\n\n\nvar content = \"включение вентилятора :\"+msg.payload;\nvar ObjectPayload={\n    \"chatId\": \"843873284\",\n    \"type\": \"message\",\n    \"content\":content \n}\nmsg.payload=ObjectPayload;\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1700,
        "y": 240,
        "wires": [
            [
                "c3d1b48d.749068"
            ]
        ]
    },
    {
        "id": "c3d1b48d.749068",
        "type": "telegram sender",
        "z": "c22de8d6.aec338",
        "name": "sender",
        "bot": "ca786bad.5ac7a8",
        "haserroroutput": false,
        "outputs": 1,
        "x": 1870,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "1349b35a.eedded",
        "type": "function",
        "z": "c22de8d6.aec338",
        "name": "send by seq",
        "func": "var numbers = [4,5,6];\nvar value = 1;\n/////pasrsing answer\nvar parsed =(msg.payload);\nvar actualCount = flow.get(\"actualCount\")||0;\nvar actualNumber = numbers[actualCount];\nif (msg.topic == \"exit\"){\n    return null;\n}\n\nif (typeof msg.payload != \"object\"){\n   msg.url = \"192.168.1.112/sendAJAX?json={\\\"t\\\":\"+actualNumber+\",\\\"v\\\":\"+value+\"}\";\n   msg.topic = \"request\";\n   flow.set(\"actualCount\",0);\n   return msg;\n}\n\n\nvar stat4 ={payload: parseInt(parsed.stat[actualNumber])};//колонки\n// var stat5 ={payload: parsed.stat[5]};//вентилятор леввый\n// var stat6 ={payload: parsed.stat[6]};//вентилятор правый\n\nif (stat4.payload === 0){//dont get it\n    msg.url = \"192.168.1.112/sendAJAX?json={\\\"t\\\":\"+actualNumber+\",\\\"v\\\":\"+value+\"}\";\n    return msg;\n}\nif (stat4.payload === 1){//move to next\n    actualCount += 1;\n    if (actualCount < numbers.length){\n        \n        actualNumber = numbers[actualCount];\n        flow.set(\"actualCount\", actualCount);\n        msg.url = \"192.168.1.112/sendAJAX?json={\\\"t\\\":\"+actualNumber+\",\\\"v\\\":\"+value+\"}\";\n        return msg;\n    }\n    else{\n        //exit from loop\n        msg.topic = \"exit\";\n        flow.set(\"actualCount\",0);\n        return msg;      \n    }\n}\n\n\n\n//return msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1710,
        "y": 180,
        "wires": [
            [
                "3a2b0ebf.367c82"
            ]
        ]
    },
    {
        "id": "3a2b0ebf.367c82",
        "type": "http request",
        "z": "c22de8d6.aec338",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1890,
        "y": 180,
        "wires": [
            [
                "1349b35a.eedded"
            ]
        ]
    },
    {
        "id": "54d2298b.6fead8",
        "type": "change",
        "z": "c22de8d6.aec338",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1600,
        "y": 140,
        "wires": [
            [
                "e3288d98.51ec",
                "415281ff.6cde2"
            ]
        ]
    },
    {
        "id": "45d05603.04f3b8",
        "type": "ui_switch",
        "z": "c22de8d6.aec338",
        "name": "",
        "label": "музыка",
        "tooltip": "",
        "group": "6a1fd3d5.2b832c",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "0",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "1",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "x": 1960,
        "y": 40,
        "wires": [
            [
                "5e3d222f.71156c"
            ]
        ]
    },
    {
        "id": "131899d8.2c22a6",
        "type": "http request",
        "z": "c22de8d6.aec338",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "192.168.1.112/sendAJAX?json={\"t\":4,\"v\":{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 2350,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "ffa92552.c3da98",
        "type": "rbe",
        "z": "c22de8d6.aec338",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 2200,
        "y": 80,
        "wires": [
            [
                "5d2d4b0b.6fa5d4",
                "6b0e4d93.7d1364"
            ]
        ]
    },
    {
        "id": "b6f38ab4.cd8d18",
        "type": "rbe",
        "z": "c22de8d6.aec338",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 2210,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "5e3d222f.71156c",
        "type": "rbe",
        "z": "c22de8d6.aec338",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 2190,
        "y": 40,
        "wires": [
            [
                "131899d8.2c22a6"
            ]
        ]
    },
    {
        "id": "6529ab1c.69c634",
        "type": "debug",
        "z": "c22de8d6.aec338",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1760,
        "y": 500,
        "wires": []
    },
    {
        "id": "451296fc.c6f218",
        "type": "ui_text",
        "z": "c22de8d6.aec338",
        "group": "6a1fd3d5.2b832c",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "влажность",
        "format": "{{msg.payload | uppercase}}",
        "layout": "row-spread",
        "x": 1270,
        "y": 480,
        "wires": []
    },
    {
        "id": "dd0305c.c86b2f8",
        "type": "rbe",
        "z": "c22de8d6.aec338",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1010,
        "y": 160,
        "wires": [
            [
                "c63ce770.7ae7e8"
            ]
        ]
    },
    {
        "id": "6707ea60.23c944",
        "type": "http request",
        "z": "c22de8d6.aec338",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 820,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "b8f073ca.a7d93",
        "type": "inject",
        "z": "a5eb6fcc.fc0cb",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "10",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 240,
        "wires": [
            [
                "e2170356.e2ada"
            ]
        ]
    },
    {
        "id": "e2170356.e2ada",
        "type": "http request",
        "z": "a5eb6fcc.fc0cb",
        "name": "TCPU",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.100:8085/api",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 370,
        "y": 240,
        "wires": [
            [
                "34ba8edd.86eb82"
            ]
        ]
    },
    {
        "id": "34ba8edd.86eb82",
        "type": "function",
        "z": "a5eb6fcc.fc0cb",
        "name": "replace",
        "func": "var TCPU={};\nvar TGPU={};\nvar TMOBO={};\nvar changestring;\nvar str;\nstr=msg.payload;\n\n        function findValue(str, value, endvalue) {\n           // value=\"label\";\n            var found = {};\n            var index = 0;\n\n              //str.slice(str.search(value));\n            str.trim();\n            while(str.indexOf(value)!==-1) {\n                var n= str.indexOf(value);\n                str = str.slice(n+value.length);\n                n=str.indexOf(endvalue);\n                found[index++] =parseInt(str.substr(0,n));\n                str = str.slice(str.indexOf(endvalue));\n\n            }\n\n                //found[index++] = str;\n                //found=str.substring(0,str.search(endvalue));\n            //}\n            return found;\n        }\n        var foundedObject=findValue(str,\"value: \\\"\",\"\\\",\");  \n    TCPU.payload=foundedObject[0];\n    TGPU.payload=foundedObject[1];\n    TMOBO.payload=foundedObject[2];\n\n    var gpu={};\n    var cpu={};\n    var system={};\n    gpu.payload = (TGPU.payload-35)*1024/(60-35);\n    cpu.payload = (TCPU.payload-54)*1024/(60-54);\n    system.payload = (TMOBO.payload-20)*1024/(48-20);\n    system.payload=768;\n    gpu.payload=0?1024:gpu.payload;\n    cpu.payload=0?1024:cpu.payload;\n    system.payload=0?1024:system.payload;\n    \nflow.set('TCPU',TCPU);    \n//return [cpu,gpu,system];\nreturn [TCPU,TGPU,TMOBO];",
        "outputs": 3,
        "noerr": 0,
        "x": 520,
        "y": 240,
        "wires": [
            [
                "e053d84a.45df18",
                "1797d227.cdd15e"
            ],
            [
                "d3fecb4b.0136a8",
                "375322bc.5426ee"
            ],
            [
                "b968619e.b1277"
            ]
        ]
    },
    {
        "id": "ef06d5ef.10ab58",
        "type": "http request",
        "z": "a5eb6fcc.fc0cb",
        "name": "GPU",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.113/sendAJAX?json={\"t\":3,\"v\":{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 870,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "662b6864.c53628",
        "type": "http request",
        "z": "a5eb6fcc.fc0cb",
        "name": "system",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.113/sendAJAX?json={\"t\":4,\"v\":{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 880,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "d337bcb4.6153a",
        "type": "http request",
        "z": "a5eb6fcc.fc0cb",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "a5a3d621.d90cb8",
        "type": "function",
        "z": "a5eb6fcc.fc0cb",
        "name": "ws8211",
        "func": "var col=msg.payload;\ncol=(col-0)*255/(1024-0);\nvar AjaxFormat=\"http://192.168.1.113/ws2811AJAX?json={%22from%22:[0],%22to%22:[7],%22type%22:[2],%22dir%22:[0],%22col%22:[\"+col+\"],%22wh%22:[0],%22br_%22:[255],%22num%22:1,%22sp%22:19,%22dr%22:255,%22fd%22:72,%22fdt%22:3,%22br%22:149}\";\nmsg.url=AjaxFormat;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 880,
        "y": 320,
        "wires": [
            [
                "d337bcb4.6153a"
            ]
        ]
    },
    {
        "id": "d3fecb4b.0136a8",
        "type": "delay",
        "z": "a5eb6fcc.fc0cb",
        "name": "",
        "pauseType": "delay",
        "timeout": "100",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 710,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "b968619e.b1277",
        "type": "delay",
        "z": "a5eb6fcc.fc0cb",
        "name": "",
        "pauseType": "delay",
        "timeout": "200",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 710,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "375322bc.5426ee",
        "type": "delay",
        "z": "a5eb6fcc.fc0cb",
        "name": "",
        "pauseType": "delay",
        "timeout": "300",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 710,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "7b7a97eb.07ad18",
        "type": "http request",
        "z": "a5eb6fcc.fc0cb",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1030,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "966e39b4.f8e798",
        "type": "function",
        "z": "a5eb6fcc.fc0cb",
        "name": "ws8211",
        "func": "var TCPU={};\nvar TGPU={};\nvar TMOBO={};\nvar changestring;\nvar str;\nstr=msg.payload;\n\n        function findValue(str, value, endvalue) {\n           // value=\"label\";\n            var found = {};\n            var index = 0;\n\n              //str.slice(str.search(value));\n            str.trim();\n            while(str.indexOf(value)!==-1) {\n                var n= str.indexOf(value);\n                str = str.slice(n+value.length);\n                n=str.indexOf(endvalue);\n                found[index++] =parseInt(str.substr(0,n));\n                str = str.slice(str.indexOf(endvalue));\n\n            }\n\n                //found[index++] = str;\n                //found=str.substring(0,str.search(endvalue));\n            //}\n            return found;\n        }\n        var foundedObject=findValue(str,\"value: \\\"\",\"\\\",\");  \n    TCPU.payload=foundedObject[0];\n    TGPU.payload=foundedObject[1];\n    TMOBO.payload=foundedObject[2];\n\n    var gpu={};\n    var cpu={};\n    var system={};\n    gpu.payload = (TGPU.payload-35)*255/(60-35);\n    cpu.payload = (TCPU.payload-54)*1024/(60-54);\n    system.payload = (TMOBO.payload-20)*1024/(48-20);\n    system.payload=768;\n    gpu.payload=0?1024:gpu.payload;\n    cpu.payload=0?1024:cpu.payload;\n    system.payload=0?1024:system.payload;\n    \n\n\n\n\n\nvar col=gpu.payload;\nvar url=\"http://192.168.1.113/ws2811AJAX?json=\";\n//col=parseInt((col-0)*255/(1024-0));\nvar AjaxFormat=url+'{\"from\":[0],\"to\":[88],\"type\":[2],\"dir\":[0],\"col\":['+col+'],\"wh\":[254],\"br_\":[255],\"num\":1,\"sp\":100,\"dr\":255,\"fd\":45,\"fdt\":3,\"br\":12}';\nmsg.url=AjaxFormat;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 880,
        "y": 360,
        "wires": [
            [
                "7b7a97eb.07ad18"
            ]
        ]
    },
    {
        "id": "a9835a89.858198",
        "type": "function",
        "z": "a5eb6fcc.fc0cb",
        "name": "bathroomTime",
        "func": "    var g1 = [], g2 = [], g3 = [];\n    var num = 88;\n    var wh = 1;\n    var FullLight = 255;\n    var LowLight = 125;\n    var color =255;\nvar StartEndPosition=122;\n\n    function binIndex(dec, maxSize) {\n        var bin = (dec >>> 0).toString(2);\n        var binchar = [];\n        var i = 0;\n        while (bin.length > 0) {\n            var char = parseInt(bin.charAt(0)) === 1 ? LowLight : FullLight;\n            bin = bin.slice(1);\n            binchar[i] = char;\n            i++;\n        }\n        while (i < maxSize) {\n            binchar[i] = LowLight;\n            i++;\n        }\n        return binchar;\n    }\n\n    var date = new Date();\n    var hour = date.getHours();\n\n    var concatBin;\n    var dempfer = [];\n    var i1 = 0;\n    while (i1 < 17) {\n        dempfer[i1] = FullLight;\n        i1++;\n    }\n    concatBin = dempfer.concat(binIndex(hour, 5)).concat(binIndex(date.getMinutes(), 11)\n        .concat(binIndex(date.getSeconds(), 6)));\n    //console.log(concatBin);\n    for (var i = 0; i < num; i++) {\n\n        g1[i] = 255;\n        g3[i] = concatBin[i] != null ? concatBin[i] : FullLight;\n        //g3[i] = concatBin[i];\n    }\n    //console.log(g1.toString());\n    var JsonString = {};\n    JsonString.num = num;\n    //JsonString.g1 = g1;\n    JsonString.g1 = color;\n    JsonString.g3 = g3;\n    JsonString.wh = wh;\n\n    var Stringify = JSON.stringify(JsonString);\n    var length_str=Stringify.length/200;\n    console.log(length_str);\n    var link = \"192.168.1.112/ws2811AJAXset?json=\" + JSON.stringify(JsonString);\n        msg.url=link;\n    return msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 780,
        "y": 460,
        "wires": [
            [
                "83bc4779.1ebae8"
            ]
        ]
    },
    {
        "id": "83bc4779.1ebae8",
        "type": "http request",
        "z": "a5eb6fcc.fc0cb",
        "name": "bath",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 980,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "16828a7a.6482d6",
        "type": "inject",
        "z": "a5eb6fcc.fc0cb",
        "d": true,
        "name": "10sec",
        "repeat": "10",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 580,
        "y": 460,
        "wires": [
            [
                "f574935.c44607"
            ]
        ]
    },
    {
        "id": "f574935.c44607",
        "type": "function",
        "z": "a5eb6fcc.fc0cb",
        "name": "bathroom",
        "func": "   function getRandomArbitrary(min, max) {\n        return Math.floor(Math.random() * (max - min) + min);\n    }\n       var JsonString = {};\n    JsonString.from = [0];\n    //JsonString.g1 = g1;\n    JsonString.to = [88];\n    JsonString.type = [getRandomArbitrary(1,13)];\n    JsonString.dir = [0];\n    JsonString.col = [0];\n    JsonString.wh = [1];\n    JsonString.br_ = [255];\n    JsonString.num = 1;\n    JsonString.sp = getRandomArbitrary(1,20);\n    JsonString.dr = 255;\n    JsonString.fd = getRandomArbitrary(1,100);\n    JsonString.fdt = 3;\n    JsonString.br = getRandomArbitrary(100,255);\n\n\n\n    var Stringify = JSON.stringify(JsonString);\n    //var length_str = Stringify.length / 200;\n    //console.log(length_str);\n    //msg=function?json={'ws2811_setup':1}\", function (callback) {\n    var link = \"192.168.1.112/ws2811AJAX?json=\" + JSON.stringify(JsonString);\n    msg.url=link;\n    return msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 760,
        "y": 520,
        "wires": [
            [
                "83bc4779.1ebae8"
            ]
        ]
    },
    {
        "id": "c7bcc3bd.0a5b7",
        "type": "function",
        "z": "a5eb6fcc.fc0cb",
        "name": "Bathroom",
        "func": "var parsed =(msg.payload);\nvar stat0={};\nvar stat2={};\n\nstat0.payload =parsed.stat[0];//движение\nstat2.payload =parsed.stat[2];//влажность\n\nvar stat1 ={payload: parsed.stat[1]};//температура\nvar stat3 ={payload: parsed.stat[3]};//3\nvar stat4 ={payload: parsed.stat[4]};//4\nvar stat5 ={payload: parsed.stat[5]};//вентилятор леввый\nvar stat6 ={payload: parsed.stat[6]};//вентилятор правый\nstat0.topic = \"move\";\nstat2.topic = \"humidity\";\n\nvar nowDate = new Date();\nvar Hour = nowDate.getHours();\n\n\nvar switch_bathroom = flow.get(\"$fan.switch_bathroom\");\nswitch_bathroom=1;\nif (stat2.payload>60){\n    if ((Hour>8)&&(Hour<22)&&(switch_bathroom==1)){\n    msg.payload = 0;\n    }\n}else{\n    msg.payload = 1;\n}\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 460,
        "y": 520,
        "wires": [
            [
                "4dc0c70b.0892b8"
            ]
        ]
    },
    {
        "id": "4dc0c70b.0892b8",
        "type": "link out",
        "z": "a5eb6fcc.fc0cb",
        "name": "to_fan_bathroom",
        "links": [],
        "x": 555,
        "y": 520,
        "wires": []
    },
    {
        "id": "a2a61a52.121178",
        "type": "function",
        "z": "a5eb6fcc.fc0cb",
        "name": "Decode Weather",
        "func": " var wheather=msg.payload;\n \n    //var wheather = \"{\\\"coord\\\":{\\\"lon\\\":34.9833,\\\"lat\\\":48.45},\\\"weather\\\":[{\\\"id\\\":500,\\\"main\\\":\\\"Rain\\\",\\\"description\\\":\\\"light rain\\\",\\\"icon\\\":\\\"10d\\\"},{\\\"id\\\":701,\\\"main\\\":\\\"Mist\\\",\\\"description\\\":\\\"mist\\\",\\\"icon\\\":\\\"50d\\\"}],\\\"base\\\":\\\"stations\\\",\\\"main\\\":{\\\"temp\\\":279.48,\\\"feels_like\\\":275.13,\\\"temp_min\\\":279.15,\\\"temp_max\\\":279.82,\\\"pressure\\\":1002,\\\"humidity\\\":100},\\\"visibility\\\":3500,\\\"wind\\\":{\\\"speed\\\":5,\\\"deg\\\":190},\\\"rain\\\":{\\\"1h\\\":0.11},\\\"clouds\\\":{\\\"all\\\":75},\\\"dt\\\":1612449242,\\\"sys\\\":{\\\"type\\\":1,\\\"id\\\":8901,\\\"country\\\":\\\"UA\\\",\\\"sunrise\\\":1612415098,\\\"sunset\\\":1612449779},\\\"timezone\\\":7200,\\\"id\\\":709930,\\\"name\\\":\\\"Dnipro\\\",\\\"cod\\\":200}\";\n    // var wheather2=\"{\\\"coord\\\":{\\\"lon\\\":34.9833,\\\"lat\\\":48.45},\\\"weather\\\":[{\\\"id\\\":803,\\\"main\\\":\\\"Clouds\\\",\\\"description\\\":\\\"broken clouds\\\",\\\"icon\\\":\\\"04n\\\"}],\\\"base\\\":\\\"stations\\\",\\\"main\\\":{\\\"temp\\\":267.1,\\\"feels_like\\\":257.04,\\\"temp_min\\\":267.04,\\\"temp_max\\\":267.15,\\\"pressure\\\":1018,\\\"humidity\\\":73},\\\"visibility\\\":10000,\\\"wind\\\":{\\\"speed\\\":10,\\\"deg\\\":320},\\\"clouds\\\":{\\\"all\\\":75},\\\"dt\\\":1612555439,\\\"sys\\\":{\\\"type\\\":1,\\\"id\\\":8901,\\\"country\\\":\\\"UA\\\",\\\"sunrise\\\":1612501412,\\\"sunset\\\":1612536277},\\\"timezone\\\":7200,\\\"id\\\":709930,\\\"name\\\":\\\"Dnipro\\\",\\\"cod\\\":200}\";\n    // var wheather3=\"{\\\"coord\\\":{\\\"lon\\\":34.9833,\\\"lat\\\":48.45},\\\"weather\\\":[{\\\"id\\\":800,\\\"main\\\":\\\"Clear\\\",\\\"description\\\":\\\"clear sky\\\",\\\"icon\\\":\\\"01d\\\"}],\\\"base\\\":\\\"stations\\\",\\\"main\\\":{\\\"temp\\\":269.43,\\\"feels_like\\\":263.53,\\\"temp_min\\\":268.71,\\\"temp_max\\\":270.15,\\\"pressure\\\":1016,\\\"humidity\\\":59},\\\"visibility\\\":10000,\\\"wind\\\":{\\\"speed\\\":4,\\\"deg\\\":290},\\\"clouds\\\":{\\\"all\\\":0},\\\"dt\\\":1612612299,\\\"sys\\\":{\\\"type\\\":1,\\\"id\\\":8901,\\\"country\\\":\\\"UA\\\",\\\"sunrise\\\":1612587724,\\\"sunset\\\":1612622776},\\\"timezone\\\":7200,\\\"id\\\":709930,\\\"name\\\":\\\"Dnipro\\\",\\\"cod\\\":200}\";\n    var wheather_parse = JSON.parse(wheather);\n    var feels_like = Math.round(wheather_parse.main.feels_like - 273, 15);\n    var temp = Math.round(wheather_parse.main.temp - 273, 15);\n    var signigicant_wheather = 0;\n    if (wheather_parse.weather[0].main === ('Rain')) {\n        signigicant_wheather = 4;\n    } else if (wheather_parse.weather[0].main === ('Clouds')) {\n        signigicant_wheather = 1;\n    } else if (wheather_parse.weather[0].main === ('Snow')) {\n        signigicant_wheather = 5;\n    } else if (wheather_parse.weather[0].main === ('Clear')) {\n        signigicant_wheather = 0;//Clear\n    }\n\n    //console.log(wheather_parse.weather[0].main===('Clear'));\n    var main = (wheather_parse.weather)[0].description;\n    var wind = (wheather_parse.wind.speed);\n    var wind_dir = (wheather_parse.wind.deg);\n    var sunrise=(new Date(wheather_parse.sys.sunrise*1000).getHours()*60+(new Date(wheather_parse.sys.sunrise*1000).getMinutes()));\n    var sunset=(new Date(wheather_parse.sys.sunset*1000).getHours()*60+(new Date(wheather_parse.sys.sunset*1000).getMinutes()));\n    var nowtime=(new Date().getHours()*60+(new Date().getMinutes()));\n    var isSunrise = ((sunrise)<(nowtime)&&((sunset)>(nowtime)))?255:100;\n\n    function getMinMax(value, minOutput, maxOutput, maxInput) {\n        var middle = 0;\n        middle = Math.round((value - minOutput) * maxInput / (maxOutput - minOutput));\n        return middle;\n    }\n\n    var ws8211 = \"{\\\"from\\\":[0],\\\"to\\\":[88],\\\"type\\\":[1],\\\"dir\\\":[0],\\\"col\\\":[0],\\\"wh\\\":[128],\\\"br_\\\":[230],\\\"num\\\":1,\\\"sp\\\":254,\\\"dr\\\":255,\\\"fd\\\":4,\\\"fdt\\\":3,\\\"br\\\":255}\";\n    var JsonString = {};\n    JsonString.from = [0];\n    //JsonString.g1 = g1;\n    JsonString.to = [41];\n    JsonString.type = [signigicant_wheather];\n    JsonString.dir = [wind_dir < 180 ? 0 : 1];\n    JsonString.col = [getMinMax(temp, -20, 40, 255)];\n    JsonString.wh = [255];\n    JsonString.br_ = [isSunrise];\n    JsonString.num = 1;\n    JsonString.sp = getMinMax(wind, 0, 15, 255);\n    JsonString.dr = 255;\n    JsonString.fd = ((signigicant_wheather == 1) || (signigicant_wheather == 0)) ? 100 : 100;\n    JsonString.fdt = 3;\n    JsonString.br = 255;\n\n    var url = \"http://192.168.1.111/ws2811AJAX?json=\";\n    var AjaxFormat = url + JSON.stringify(JsonString);\n    console.log(AjaxFormat);\n    msg.url = AjaxFormat;\n    return msg;\n    console.log(AjaxFormat);\n    msg.url = AjaxFormat;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1090,
        "y": 660,
        "wires": [
            [
                "2fa56b82.57dd14"
            ]
        ]
    },
    {
        "id": "2fa56b82.57dd14",
        "type": "http request",
        "z": "a5eb6fcc.fc0cb",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1290,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "5882108e.aa06d",
        "type": "telegram sender",
        "z": "a5eb6fcc.fc0cb",
        "name": "send_watering",
        "bot": "ca786bad.5ac7a8",
        "haserroroutput": false,
        "outputs": 1,
        "x": 380,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "c3b0e73.fb45918",
        "type": "function",
        "z": "a5eb6fcc.fc0cb",
        "name": "message",
        "func": "var content = msg.topic+\" payload:\"+msg.payload;\nvar ObjectPayload={\n    \"chatId\": \"843873284\",\n    \"type\": \"message\",\n    \"content\":content \n}\nmsg.payload=ObjectPayload;\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 220,
        "y": 460,
        "wires": [
            [
                "5882108e.aa06d"
            ]
        ]
    },
    {
        "id": "4b30a613.66ff58",
        "type": "rbe",
        "z": "a5eb6fcc.fc0cb",
        "name": "",
        "func": "deadband",
        "gap": "10",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 300,
        "y": 520,
        "wires": [
            [
                "c7bcc3bd.0a5b7"
            ]
        ]
    },
    {
        "id": "3ea14a5d.c76086",
        "type": "inject",
        "z": "a5eb6fcc.fc0cb",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 320,
        "y": 1540,
        "wires": [
            [
                "e4e814e.4e3dbe8"
            ]
        ]
    },
    {
        "id": "9641d964.f78c18",
        "type": "inject",
        "z": "a5eb6fcc.fc0cb",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 320,
        "y": 1620,
        "wires": [
            [
                "4ebaafae.1cbc5"
            ]
        ]
    },
    {
        "id": "e4e814e.4e3dbe8",
        "type": "change",
        "z": "a5eb6fcc.fc0cb",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "dividend",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 1540,
        "wires": [
            [
                "1dec84bb.1327db"
            ]
        ]
    },
    {
        "id": "4ebaafae.1cbc5",
        "type": "change",
        "z": "a5eb6fcc.fc0cb",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "divisor",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 1620,
        "wires": [
            [
                "1dec84bb.1327db"
            ]
        ]
    },
    {
        "id": "1dec84bb.1327db",
        "type": "function",
        "z": "a5eb6fcc.fc0cb",
        "name": "",
        "func": "\nreturn {payload:(flow.get('dividend')/flow.get('divisor'))};",
        "outputs": 1,
        "noerr": 0,
        "x": 710,
        "y": 1580,
        "wires": [
            []
        ]
    },
    {
        "id": "710f56b0.80d628",
        "type": "link in",
        "z": "a5eb6fcc.fc0cb",
        "name": "Bathroom_out_deadband",
        "links": [],
        "x": 175,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "e053d84a.45df18",
        "type": "ui_chart",
        "z": "a5eb6fcc.fc0cb",
        "name": "",
        "group": "ce3b49b9.4b9e18",
        "order": 1,
        "width": 0,
        "height": 0,
        "label": "TCPU",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "x": 990,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "1797d227.cdd15e",
        "type": "http request",
        "z": "a5eb6fcc.fc0cb",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": false,
        "url": "http://192.168.1.115/sendAJAX?json={%22t%22:127,%22v%22:0}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 570,
        "y": 140,
        "wires": [
            [
                "826444eb.be0678"
            ]
        ]
    },
    {
        "id": "826444eb.be0678",
        "type": "function",
        "z": "a5eb6fcc.fc0cb",
        "name": "cpu 192.168.1.115",
        "func": "var parsed =(msg.payload);\n\n\nvar prevTemp;\nvar nowTemp;\nif (flow.get(\"prevTemp\")!==0){\n    prevTemp = flow.get(\"prevTemp\");\n}\n\nif (parsed.stat[0]!==0){\n    flow.set(\"prevTemp\",parsed.stat[0]);\n    nowTemp = parsed.stat[0];\n}else{\n    nowTemp = flow.get(\"prevTemp\");\n}\nvar stat0 ={topic:\"temp\", payload: nowTemp};//температура\n\nvar TCPU=flow.get('TCPU');\nvar difference = {payload: (TCPU.payload - nowTemp)};\n\nreturn [difference,stat0];",
        "outputs": 2,
        "noerr": 0,
        "x": 790,
        "y": 60,
        "wires": [
            [
                "b7e89044.7eb01"
            ],
            [
                "1699b447.145a4c"
            ]
        ]
    },
    {
        "id": "b7e89044.7eb01",
        "type": "ui_chart",
        "z": "a5eb6fcc.fc0cb",
        "d": true,
        "name": "",
        "group": "fc599eb8.f87e",
        "order": 2,
        "width": 0,
        "height": 0,
        "label": "TCPU-difference",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "x": 1010,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "1699b447.145a4c",
        "type": "ui_chart",
        "z": "a5eb6fcc.fc0cb",
        "name": "",
        "group": "ce3b49b9.4b9e18",
        "order": 1,
        "width": 0,
        "height": 0,
        "label": "TCPU-sensor",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "x": 1000,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "cb60b23b.cf492",
        "type": "http request",
        "z": "af702991.bdca58",
        "name": "192.168.1.150",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "192.168.1.150/function?json={reboot:1}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 440,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "de173a76.586b08",
        "type": "inject",
        "z": "af702991.bdca58",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 12 * * *",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "12:00",
        "payloadType": "str",
        "x": 70,
        "y": 120,
        "wires": [
            [
                "cb60b23b.cf492",
                "dd2454e0.28fe48"
            ]
        ]
    },
    {
        "id": "dd2454e0.28fe48",
        "type": "function",
        "z": "af702991.bdca58",
        "name": "set to 0",
        "func": "flow.set('watering_count',0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 440,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "1255807b67a6a79c",
        "type": "mqtt in",
        "z": "af702991.bdca58",
        "name": "",
        "topic": "node-red/reboot",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "a7804332c06e238f",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 80,
        "y": 240,
        "wires": [
            [
                "cb60b23b.cf492",
                "dc08f8062205ce2f"
            ]
        ]
    },
    {
        "id": "dc08f8062205ce2f",
        "type": "http request",
        "z": "af702991.bdca58",
        "name": "192.168.1.151",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "192.168.1.151/function?json={reboot:1}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 440,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "95ff1632.6243b8",
        "type": "telegram sender",
        "z": "d2d769b0.c57da8",
        "d": true,
        "name": "sender",
        "bot": "ca786bad.5ac7a8",
        "haserroroutput": false,
        "outputs": 1,
        "x": 870,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "92568c50.87034",
        "type": "telegram receiver",
        "z": "d2d769b0.c57da8",
        "name": "",
        "bot": "ca786bad.5ac7a8",
        "saveDataDir": "",
        "filterCommands": false,
        "x": 230,
        "y": 300,
        "wires": [
            [
                "f8e08d57.743f4",
                "bde56faf.4dad6"
            ],
            []
        ]
    },
    {
        "id": "fca261f6.1b4e6",
        "type": "catch",
        "z": "d2d769b0.c57da8",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 460,
        "y": 520,
        "wires": [
            [
                "a1b079ea.70ea18"
            ]
        ]
    },
    {
        "id": "2e8b7a81.d0b546",
        "type": "telegram sender",
        "z": "d2d769b0.c57da8",
        "d": true,
        "name": "Error",
        "bot": "ca786bad.5ac7a8",
        "haserroroutput": false,
        "outputs": 1,
        "x": 750,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "72b99f41.af20b",
        "type": "function",
        "z": "d2d769b0.c57da8",
        "name": "message",
        "func": "var content = msg.topic+\" payload:\"+msg.payload;\nvar TelegramChatIds = global.get(\"TelegramChatIds\");\nvar ObjectPayload={\n    \"chatId\": TelegramChatIds,\n    \"type\": \"message\",\n    \"content\":content \n}\nmsg.payload=ObjectPayload;\n    // \"chatId\": [\"843873284\", \"584925756\"],\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 160,
        "wires": [
            [
                "95ff1632.6243b8",
                "873cc158.3b54e"
            ]
        ]
    },
    {
        "id": "6d3ac462.a2e47c",
        "type": "inject",
        "z": "d2d769b0.c57da8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 250,
        "y": 160,
        "wires": [
            [
                "9138f065.10c7"
            ]
        ]
    },
    {
        "id": "a1b079ea.70ea18",
        "type": "function",
        "z": "d2d769b0.c57da8",
        "name": "message",
        "func": "var content = msg.topic+\" payload:\"+msg.payload;\nvar ObjectPayload={\n    \"chatId\": \"843873284\",\n    \"type\": \"message\",\n    \"content\":content \n}\nmsg.payload=ObjectPayload;\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 620,
        "y": 520,
        "wires": [
            [
                "2e8b7a81.d0b546"
            ]
        ]
    },
    {
        "id": "f8e08d57.743f4",
        "type": "function",
        "z": "d2d769b0.c57da8",
        "name": "reply telegram",
        "func": "//var content = msg.topic+\" payload:\"+msg.payload;\nvar msg_get_ip=null;\nvar payoladmsg = (msg.payload);\n\nvar content_that_Object ={payload: payoladmsg.content};\nvar content_send;\n\nif (content_that_Object.payload==\"ip\"){\n   content_send= context.get ('ip');\n   \n    var ObjectPayload={\n        \"chatId\": [\"843873284\", \"584925756\"],\n        \"type\": \"message\",\n        \"content\":content_send \n    }\n    \n    msg.payload=ObjectPayload;\n    \n    msg_get_ip={\n        \"topic\":1,\n        \"payload\":1\n    }\n    msg=null;\n}\n\n\n\n\n\n\nreturn [msg,msg_get_ip];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 480,
        "y": 300,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "bde56faf.4dad6",
        "type": "debug",
        "z": "d2d769b0.c57da8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 480,
        "y": 260,
        "wires": []
    },
    {
        "id": "9138f065.10c7",
        "type": "change",
        "z": "d2d769b0.c57da8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "TelegramChatIds",
                "pt": "global",
                "to": "[\"843873284\"]",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "TelegramChatIds",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 160,
        "wires": [
            [
                "72b99f41.af20b"
            ]
        ]
    },
    {
        "id": "873cc158.3b54e",
        "type": "debug",
        "z": "d2d769b0.c57da8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 880,
        "y": 80,
        "wires": []
    },
    {
        "id": "3c1987dcc97c0950",
        "type": "function",
        "z": "a69381581f637ec6",
        "name": "myroom",
        "func": "var topicObjects = [];\nvar parsed = (msg.payload);\nvar topic = (msg.topic)\n\n\n\nvar outputCount_number = node.outputCount\nif (topic == \"initial\") {\n    for (var i = 0; i < parsed.stat.length; i++) {\n        var topicObject = {\n            payload: parseFloat(parsed.stat[i]),\n            topic: i\n        };\n        topicObjects.push(topicObject);\n    }\n}\nelse {// topic is not initial\n    for (var i = 0; i < outputCount_number; i++) {\n        if (i == parseInt(topic)) {\n            topicObject = {\n                payload: parseFloat(parsed),\n                topic: parseInt(topic)\n            }\n            topicObjects.push(topicObject);\n        };\n        topicObjects.push(null);\n    }\n}\n\nreturn topicObjects;",
        "outputs": 4,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 220,
        "wires": [
            [
                "68b8f5b24c81ca18"
            ],
            [],
            [
                "087ce8cf184d7dbb",
                "36ca1aa910c3c841"
            ],
            []
        ]
    },
    {
        "id": "101ccdf189e1cff4",
        "type": "inject",
        "z": "a69381581f637ec6",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "10",
        "crontab": "",
        "once": false,
        "onceDelay": "10",
        "topic": "initial",
        "payload": "",
        "payloadType": "date",
        "x": 210,
        "y": 220,
        "wires": [
            [
                "b2b4a0fa144078ac"
            ]
        ]
    },
    {
        "id": "b2b4a0fa144078ac",
        "type": "http request",
        "z": "a69381581f637ec6",
        "name": "myroom",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "192.168.1.151/sendAJAX?json={%22t%22:127,%22v%22:0}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 400,
        "y": 220,
        "wires": [
            [
                "3c1987dcc97c0950"
            ]
        ]
    },
    {
        "id": "68b8f5b24c81ca18",
        "type": "ui_switch",
        "z": "a69381581f637ec6",
        "name": "light car",
        "label": "light car",
        "tooltip": "",
        "group": "1d2608aa5cac07fa",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "0",
        "topicType": "str",
        "style": "",
        "onvalue": "0",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "1",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 760,
        "y": 140,
        "wires": [
            [
                "883b31fc5a7146c5"
            ]
        ]
    },
    {
        "id": "cbbe677965b8d8aa",
        "type": "http request",
        "z": "a69381581f637ec6",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "http://192.168.1.151/sendAJAX?json={%22t%22:{{topic}},%22v%22:{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1170,
        "y": 240,
        "wires": [
            [
                "087ce8cf184d7dbb"
            ]
        ]
    },
    {
        "id": "883b31fc5a7146c5",
        "type": "rbe",
        "z": "a69381581f637ec6",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 910,
        "y": 140,
        "wires": [
            [
                "cbbe677965b8d8aa"
            ]
        ]
    },
    {
        "id": "7ae5c35c50beaf21",
        "type": "mqtt in",
        "z": "a69381581f637ec6",
        "name": "mqtt-messages",
        "topic": "",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "a7804332c06e238f",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 500,
        "y": 500,
        "wires": [
            [
                "d7ad5768a115e0fa"
            ]
        ]
    },
    {
        "id": "d66a2bdd1265524a",
        "type": "mqtt out",
        "z": "a69381581f637ec6",
        "name": "",
        "topic": "",
        "qos": "0",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "a7804332c06e238f",
        "x": 1630,
        "y": 480,
        "wires": []
    },
    {
        "id": "cfdba40e5be55a13",
        "type": "function",
        "z": "a69381581f637ec6",
        "name": "subscribe",
        "func": "var subcsciptionLoop = []\n\nfor (var i = 0; i < 5; i++) {\n    var subscriptionVar = {\n        action: \"subscribe\",\n        topic: \"node-red/roof/control/\" + i\n    }\n    subcsciptionLoop.push(subscriptionVar);\n}\nreturn [subcsciptionLoop];",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 500,
        "wires": [
            [
                "7ae5c35c50beaf21"
            ]
        ]
    },
    {
        "id": "6582a88230d87d39",
        "type": "inject",
        "z": "a69381581f637ec6",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 500,
        "wires": [
            [
                "cfdba40e5be55a13"
            ]
        ]
    },
    {
        "id": "d7ad5768a115e0fa",
        "type": "function",
        "z": "a69381581f637ec6",
        "name": "decoder",
        "func": "var topicIn = msg.topic; //node-red/room/control/0\nvar parts = topicIn.split('/');\nvar lastPart = parts[parts.length - 1];\nvar number = parseInt(lastPart, 10);\n\nmsg.topic = number;\nmsg.payload = msg.payload;\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 500,
        "wires": [
            [
                "3c1987dcc97c0950"
            ]
        ]
    },
    {
        "id": "087ce8cf184d7dbb",
        "type": "function",
        "z": "a69381581f637ec6",
        "name": "encoder node-red/room/{{topic}}",
        "func": "msg.topic = \"node-red/roof/\" + msg.topic;\nmsg.qos = 0;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1350,
        "y": 480,
        "wires": [
            [
                "d66a2bdd1265524a"
            ]
        ]
    },
    {
        "id": "ce9b2a3b7b2e04f1",
        "type": "function",
        "z": "a69381581f637ec6",
        "name": "Error",
        "func": "if (msg.payload.startsWith(\"Error:\")){\nmsg.url = \"192.168.1.150/function?json={reboot:1}\"\n\nreturn msg;\n}\nreturn null;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 970,
        "y": 400,
        "wires": [
            [
                "c96f813582677fe2"
            ]
        ]
    },
    {
        "id": "c96f813582677fe2",
        "type": "http request",
        "z": "a69381581f637ec6",
        "name": "reboot",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1110,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "344dbb3b2b9a1329",
        "type": "ui_chart",
        "z": "a69381581f637ec6",
        "name": "temp",
        "group": "1d2608aa5cac07fa",
        "order": 6,
        "width": 0,
        "height": 0,
        "label": "temp roof",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "604800",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 970,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "36ca1aa910c3c841",
        "type": "function",
        "z": "a69381581f637ec6",
        "name": "set topic and payload filter",
        "func": "if (msg.payload > 60){\n    return null;\n}\nmsg.topic = 2;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 300,
        "wires": [
            [
                "344dbb3b2b9a1329"
            ]
        ]
    },
    {
        "id": "ed27cae4.70b728",
        "type": "inject",
        "z": "772e6979.67cd08",
        "name": "update",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "30",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 240,
        "wires": [
            [
                "f25a9b1d.c6fce8",
                "21faa622.8c25da",
                "7cf01d46.a3cad4",
                "7780c9ca.7581b8",
                "c63cb373.ce94f",
                "4e1aaf390d435b7f"
            ]
        ]
    },
    {
        "id": "240a76f3.9953ea",
        "type": "function",
        "z": "772e6979.67cd08",
        "name": "",
        "func": "msg.payload = msg.payload.loadavg[0];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 459,
        "y": 100,
        "wires": [
            [
                "51dfac0c.fdc9c4"
            ]
        ]
    },
    {
        "id": "5d85387c.957fb8",
        "type": "function",
        "z": "772e6979.67cd08",
        "name": "",
        "func": "msg.payload = msg.payload.loadavg[1];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 460,
        "y": 138,
        "wires": [
            [
                "79d3dbc8.390014"
            ]
        ]
    },
    {
        "id": "b33d4d45.a6673",
        "type": "function",
        "z": "772e6979.67cd08",
        "name": "",
        "func": "msg.payload = msg.payload.loadavg[2];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 459,
        "y": 181,
        "wires": [
            [
                "1ff0080f.4e10c8"
            ]
        ]
    },
    {
        "id": "51dfac0c.fdc9c4",
        "type": "ui_gauge",
        "z": "772e6979.67cd08",
        "name": "CPU Load 1",
        "group": "7853403.230cdc",
        "order": 1,
        "width": "0",
        "height": "0",
        "gtype": "gage",
        "title": "1 Minute",
        "label": "load",
        "format": "{{value | number:2}}",
        "min": 0,
        "max": "4",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "x": 627,
        "y": 99,
        "wires": []
    },
    {
        "id": "79d3dbc8.390014",
        "type": "ui_gauge",
        "z": "772e6979.67cd08",
        "name": "CPU Load 2",
        "group": "7853403.230cdc",
        "order": 2,
        "width": "3",
        "height": "3",
        "gtype": "gage",
        "title": "5 Minutes",
        "label": "load",
        "format": "{{value | number:2}}",
        "min": 0,
        "max": "4",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "x": 627,
        "y": 140,
        "wires": []
    },
    {
        "id": "1ff0080f.4e10c8",
        "type": "ui_gauge",
        "z": "772e6979.67cd08",
        "name": "CPU Load 3",
        "group": "7853403.230cdc",
        "order": 4,
        "width": "3",
        "height": "3",
        "gtype": "gage",
        "title": "15 Minutes",
        "label": "load",
        "format": "{{value | number:2}}",
        "min": 0,
        "max": "4",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "x": 625,
        "y": 182,
        "wires": []
    },
    {
        "id": "e6b8a679.aff648",
        "type": "function",
        "z": "772e6979.67cd08",
        "name": "",
        "func": "msg.payload = msg.payload.memusage;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 242,
        "y": 694,
        "wires": [
            [
                "cc57cdea.f9387"
            ]
        ]
    },
    {
        "id": "cc57cdea.f9387",
        "type": "ui_gauge",
        "z": "772e6979.67cd08",
        "name": "Memory Usage",
        "group": "1d1da0fc.6ab84f",
        "order": 1,
        "width": "0",
        "height": "0",
        "gtype": "gage",
        "title": "1 Minute",
        "label": "Usage",
        "format": "{{value | number:2}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "x": 426,
        "y": 698,
        "wires": []
    },
    {
        "id": "dd0cca19.6f90a8",
        "type": "function",
        "z": "772e6979.67cd08",
        "name": "",
        "func": "function formatBytes(bytes,decimals) {\n   if(bytes === 0) return '0 Byte';\n   var k = 1000; // or 1024 for binary\n   var dm = decimals + 1 || 3;\n   var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n   var i = Math.floor(Math.log(bytes) / Math.log(k));\n   return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n}\n\nmsg.payload = formatBytes(msg.payload.totalmem);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 244,
        "y": 737,
        "wires": [
            [
                "4aeaebd1.24f4c4"
            ]
        ]
    },
    {
        "id": "308d683f.10ab08",
        "type": "function",
        "z": "772e6979.67cd08",
        "name": "",
        "func": "function formatBytes(bytes,decimals) {\n   if(bytes === 0) return '0 Byte';\n   var k = 1000; // or 1024 for binary\n   var dm = decimals + 1 || 3;\n   var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n   var i = Math.floor(Math.log(bytes) / Math.log(k));\n   return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n}\n\nmsg.payload = formatBytes(msg.payload.freemem);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 242,
        "y": 783,
        "wires": [
            [
                "ef649e9b.dce7d"
            ]
        ]
    },
    {
        "id": "4aeaebd1.24f4c4",
        "type": "ui_text",
        "z": "772e6979.67cd08",
        "group": "1d1da0fc.6ab84f",
        "order": 2,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Total Memory",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 425,
        "y": 741,
        "wires": []
    },
    {
        "id": "ef649e9b.dce7d",
        "type": "ui_text",
        "z": "772e6979.67cd08",
        "group": "1d1da0fc.6ab84f",
        "order": 3,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Free Memory",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 429,
        "y": 784,
        "wires": []
    },
    {
        "id": "20567afa.bd4466",
        "type": "function",
        "z": "772e6979.67cd08",
        "name": "",
        "func": "function timeConversion(millisec) {\n\n    var seconds = (millisec / 1000).toFixed(1);\n\n    var minutes = (millisec / (1000 * 60)).toFixed(1);\n\n    var hours = (millisec / (1000 * 60 * 60)).toFixed(1);\n\n    var days = (millisec / (1000 * 60 * 60 * 24)).toFixed(1);\n\n    if (seconds < 60) {\n        return seconds + \" Sec\";\n    } else if (minutes < 60) {\n        return minutes + \" Min\";\n    } else if (hours < 24) {\n        return hours + \" Hrs\";\n    } else {\n        return days + \" Days\"\n    }\n}\n\nmsg.payload = timeConversion(msg.payload.uptime * 1000);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 532,
        "y": 348,
        "wires": [
            [
                "91bb24ba.6dba48"
            ]
        ]
    },
    {
        "id": "91bb24ba.6dba48",
        "type": "ui_text",
        "z": "772e6979.67cd08",
        "group": "a9912d64.97094",
        "order": 1,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Uptime",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 687,
        "y": 347,
        "wires": []
    },
    {
        "id": "f745cace.30f2d8",
        "type": "function",
        "z": "772e6979.67cd08",
        "name": "",
        "func": "msg.payload = msg.payload.hostname;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 531,
        "y": 385,
        "wires": [
            [
                "f9bfd652.4be908"
            ]
        ]
    },
    {
        "id": "f9bfd652.4be908",
        "type": "ui_text",
        "z": "772e6979.67cd08",
        "group": "a9912d64.97094",
        "order": 1,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Hostname",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 699,
        "y": 387,
        "wires": []
    },
    {
        "id": "3153bd68.82b782",
        "type": "function",
        "z": "772e6979.67cd08",
        "name": "",
        "func": "msg.payload = msg.payload.platform;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 533,
        "y": 423,
        "wires": [
            [
                "6c7dc269.a0180c"
            ]
        ]
    },
    {
        "id": "6c7dc269.a0180c",
        "type": "ui_text",
        "z": "772e6979.67cd08",
        "group": "a9912d64.97094",
        "order": 1,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Platform",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 695,
        "y": 426,
        "wires": []
    },
    {
        "id": "7eec4b7e.c15ad4",
        "type": "function",
        "z": "772e6979.67cd08",
        "name": "",
        "func": "msg.payload = msg.payload.arch;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 534,
        "y": 462,
        "wires": [
            [
                "a6e5bcd3.7c90e"
            ]
        ]
    },
    {
        "id": "a6e5bcd3.7c90e",
        "type": "ui_text",
        "z": "772e6979.67cd08",
        "group": "a9912d64.97094",
        "order": 1,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Arch",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 683,
        "y": 466,
        "wires": []
    },
    {
        "id": "6b4d7f76.271fb",
        "type": "function",
        "z": "772e6979.67cd08",
        "name": "",
        "func": "msg.payload = msg.payload.release;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 535,
        "y": 498,
        "wires": [
            [
                "f7e2d4a1.f3acf8"
            ]
        ]
    },
    {
        "id": "f7e2d4a1.f3acf8",
        "type": "ui_text",
        "z": "772e6979.67cd08",
        "group": "a9912d64.97094",
        "order": 1,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Release",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 695,
        "y": 504,
        "wires": []
    },
    {
        "id": "8a945e71.8626b",
        "type": "function",
        "z": "772e6979.67cd08",
        "name": "",
        "func": "msg.payload = msg.payload.cpus[0].model;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 534,
        "y": 539,
        "wires": [
            [
                "6ce3fe6a.0088f",
                "6ed6930f.dfaa0c",
                "2cf68a4b.2caef6",
                "6ad00145.d0875"
            ]
        ]
    },
    {
        "id": "6ce3fe6a.0088f",
        "type": "ui_text",
        "z": "772e6979.67cd08",
        "group": "a9912d64.97094",
        "order": 1,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "CPU 1",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 686,
        "y": 547,
        "wires": []
    },
    {
        "id": "6ed6930f.dfaa0c",
        "type": "ui_text",
        "z": "772e6979.67cd08",
        "group": "a9912d64.97094",
        "order": 1,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "CPU 2",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 688,
        "y": 586,
        "wires": []
    },
    {
        "id": "2cf68a4b.2caef6",
        "type": "ui_text",
        "z": "772e6979.67cd08",
        "group": "a9912d64.97094",
        "order": 1,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "CPU 3",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 690,
        "y": 627,
        "wires": []
    },
    {
        "id": "6ad00145.d0875",
        "type": "ui_text",
        "z": "772e6979.67cd08",
        "group": "a9912d64.97094",
        "order": 1,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "CPU 4",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 692,
        "y": 667,
        "wires": []
    },
    {
        "id": "a25b88bc.6ead88",
        "type": "function",
        "z": "772e6979.67cd08",
        "name": "",
        "func": "msg.payload = msg.payload.loadavg[0];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 464,
        "y": 224,
        "wires": [
            [
                "a978ef7f.6851a"
            ]
        ]
    },
    {
        "id": "a978ef7f.6851a",
        "type": "ui_chart",
        "z": "772e6979.67cd08",
        "name": "CPU Load - Historical",
        "group": "7853403.230cdc",
        "order": 0,
        "width": "0",
        "height": "0",
        "label": "24 Hours",
        "chartType": "line",
        "legend": "false",
        "xformat": "%H:%M:%S",
        "interpolate": "linear",
        "nodata": "",
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderUnit": "86400",
        "outputs": 1,
        "x": 656,
        "y": 224,
        "wires": [
            []
        ]
    },
    {
        "id": "fbd3e7db.8ca558",
        "type": "function",
        "z": "772e6979.67cd08",
        "name": "",
        "func": "msg.payload = msg.payload.memusage;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 239,
        "y": 655,
        "wires": [
            [
                "ae72c338.cf1ff"
            ]
        ]
    },
    {
        "id": "ae72c338.cf1ff",
        "type": "ui_chart",
        "z": "772e6979.67cd08",
        "name": "Memory - 24 Hours",
        "group": "1d1da0fc.6ab84f",
        "order": 0,
        "width": "0",
        "height": "0",
        "label": "24 Hours",
        "chartType": "line",
        "legend": "false",
        "xformat": "%H:%M:%S",
        "interpolate": "linear",
        "nodata": "",
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderUnit": "86400",
        "outputs": 1,
        "x": 437,
        "y": 658,
        "wires": [
            []
        ]
    },
    {
        "id": "6d8c1a68.736494",
        "type": "comment",
        "z": "772e6979.67cd08",
        "name": "CPU Load",
        "info": "",
        "x": 614,
        "y": 52,
        "wires": []
    },
    {
        "id": "c759448a.854258",
        "type": "comment",
        "z": "772e6979.67cd08",
        "name": "Memory Usage",
        "info": "",
        "x": 422,
        "y": 608,
        "wires": []
    },
    {
        "id": "ff2b3794.382148",
        "type": "comment",
        "z": "772e6979.67cd08",
        "name": "System Information",
        "info": "",
        "x": 713,
        "y": 297,
        "wires": []
    },
    {
        "id": "f25a9b1d.c6fce8",
        "type": "OS",
        "z": "772e6979.67cd08",
        "name": "",
        "x": 360,
        "y": 393,
        "wires": [
            [
                "f745cace.30f2d8",
                "3153bd68.82b782",
                "7eec4b7e.c15ad4",
                "6b4d7f76.271fb"
            ]
        ]
    },
    {
        "id": "c63cb373.ce94f",
        "type": "Uptime",
        "z": "772e6979.67cd08",
        "name": "",
        "x": 371,
        "y": 348,
        "wires": [
            [
                "20567afa.bd4466"
            ]
        ]
    },
    {
        "id": "21faa622.8c25da",
        "type": "CPUs",
        "z": "772e6979.67cd08",
        "name": "",
        "x": 360,
        "y": 438,
        "wires": [
            [
                "8a945e71.8626b"
            ]
        ]
    },
    {
        "id": "7780c9ca.7581b8",
        "type": "Loadavg",
        "z": "772e6979.67cd08",
        "name": "",
        "x": 297,
        "y": 160,
        "wires": [
            [
                "240a76f3.9953ea",
                "5d85387c.957fb8",
                "b33d4d45.a6673",
                "a25b88bc.6ead88"
            ]
        ]
    },
    {
        "id": "7cf01d46.a3cad4",
        "type": "Memory",
        "z": "772e6979.67cd08",
        "name": "",
        "x": 237,
        "y": 526,
        "wires": [
            [
                "e6b8a679.aff648",
                "dd0cca19.6f90a8",
                "308d683f.10ab08",
                "fbd3e7db.8ca558"
            ]
        ]
    },
    {
        "id": "4e1aaf390d435b7f",
        "type": "Drives",
        "z": "772e6979.67cd08",
        "name": "",
        "x": 230,
        "y": 880,
        "wires": [
            [
                "64f704f90b4d1376"
            ]
        ]
    },
    {
        "id": "45ce266042c71c11",
        "type": "ui_text",
        "z": "772e6979.67cd08",
        "group": "1d1da0fc.6ab84f",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Dsik usage capacity",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 660,
        "y": 880,
        "wires": []
    },
    {
        "id": "64f704f90b4d1376",
        "type": "function",
        "z": "772e6979.67cd08",
        "name": "function",
        "func": "// Function to calculate available size percentage for /dev/sda1\nlet data = msg.payload;\nfunction getAvailablePercentage(filesystems) {\n    for (let fs of filesystems) {\n        if (fs.filesystem === \"/dev/sda1\") {\n            let availablePercentage = (fs.available / fs.size) * 100;\n            return availablePercentage.toFixed(2) + \"%\";\n        }\n    }\n    return \"Filesystem not found\";\n}\n\n// Get the available size percentage for /dev/sda1\nlet availablePercentage = getAvailablePercentage(data);\nmsg.payload = availablePercentage\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 880,
        "wires": [
            [
                "45ce266042c71c11",
                "4335bed2178ac2a2"
            ]
        ]
    },
    {
        "id": "4335bed2178ac2a2",
        "type": "ui_gauge",
        "z": "772e6979.67cd08",
        "name": "",
        "group": "1d1da0fc.6ab84f",
        "order": 5,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Disk available",
        "label": "units",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "diff": false,
        "className": "",
        "x": 740,
        "y": 840,
        "wires": []
    },
    {
        "id": "27305ebce4a2d493",
        "type": "inject",
        "z": "47e2824120b2a9e0",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "3",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 310,
        "y": 340,
        "wires": [
            [
                "7df1bdd34f900e31"
            ]
        ]
    },
    {
        "id": "7df1bdd34f900e31",
        "type": "http request",
        "z": "47e2824120b2a9e0",
        "name": "",
        "method": "GET",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "http://192.168.1.163:8080/shot.jpg",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 490,
        "y": 340,
        "wires": [
            [
                "0a4bc3d7ef6e5525"
            ]
        ]
    },
    {
        "id": "0a4bc3d7ef6e5525",
        "type": "good-object-detection",
        "z": "47e2824120b2a9e0",
        "name": "",
        "returnValue": 0,
        "model": "yolov8n",
        "threshold": "0.5",
        "absolutePathDir": "",
        "x": 740,
        "y": 340,
        "wires": [
            [
                "9c0407f65342dcf1",
                "94b81325a4187ed1",
                "dbf68cf631e5635a"
            ]
        ]
    },
    {
        "id": "d41c11332894c274",
        "type": "telegram sender",
        "z": "47e2824120b2a9e0",
        "name": "sender",
        "bot": "ca786bad.5ac7a8",
        "haserroroutput": false,
        "outputs": 1,
        "x": 1410,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "1661ecf3d0a55af0",
        "type": "function",
        "z": "47e2824120b2a9e0",
        "name": "function 1",
        "func": "\n\nfunction checkForPersonArrays(input) {\n    // Check if the input object has a property named 'person' and it's an array\n    if (input.hasOwnProperty('person') && Array.isArray(input.person)) {\n        let personArray = input.person;\n        let personCount = personArray.length;\n        return personCount;\n    } else {\n        return null; // Return null if 'person' array is not found\n    }\n}\n\nlet result = checkForPersonArrays(msg.payload.data);\nif (result != null) {\n    msg.payload = result\n    // node.error(msg.payload);\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "9c0407f65342dcf1",
        "type": "delay",
        "z": "47e2824120b2a9e0",
        "name": "",
        "pauseType": "rate",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "10",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 960,
        "y": 240,
        "wires": [
            [
                "7df1bdd34f900e31"
            ]
        ]
    },
    {
        "id": "dbf68cf631e5635a",
        "type": "debug",
        "z": "47e2824120b2a9e0",
        "name": "debug 1",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1140,
        "y": 320,
        "wires": []
    },
    {
        "id": "94b81325a4187ed1",
        "type": "rbe",
        "z": "47e2824120b2a9e0",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 670,
        "y": 500,
        "wires": [
            [
                "53b821a54e7e406c"
            ]
        ]
    },
    {
        "id": "e7e89d12bb126d12",
        "type": "function",
        "z": "47e2824120b2a9e0",
        "name": "message",
        "func": "var content = msg.payload;\n    // \"chatId\": [\"843873284\", \"584925756\"],\nvar TelegramChatIds = global.get(\"TelegramChatIds\");\n\nif (!Array.isArray(TelegramChatIds)) {\n    node.error(\"TelegramChatIds is not an array\");\n    return null;\n}\n\nmsg.payload =TelegramChatIds.map(chatId => {\n    return {\n        \"chatId\": chatId,\n        \"type\": \"message\",\n        \"content\": JSON.stringify(content) // Convert content to a string\n    };\n});\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1120,
        "y": 500,
        "wires": [
            [
                "0cd8360317285611"
            ]
        ]
    },
    {
        "id": "0cd8360317285611",
        "type": "rbe",
        "z": "47e2824120b2a9e0",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 1290,
        "y": 500,
        "wires": [
            [
                "d41c11332894c274"
            ]
        ]
    },
    {
        "id": "4517be7281db9072",
        "type": "ui_text",
        "z": "47e2824120b2a9e0",
        "group": "d933d053d66f5444",
        "order": 6,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "objects",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1120,
        "y": 400,
        "wires": []
    },
    {
        "id": "53b821a54e7e406c",
        "type": "function",
        "z": "47e2824120b2a9e0",
        "name": "function 2",
        "func": "function checkForDataArrays(input) {\n    let result = {};\n\n    // Iterate over each property in the input object\n    for (let key in input) {\n        if (Array.isArray(input[key])) {\n            // Add the array name and its count to the result object\n            result[key] = input[key].length;\n        }\n    }\n\n    // Return the result object if it has any properties, otherwise return null\n    return Object.keys(result).length > 0 ? result : null;\n}\n\nlet result = checkForDataArrays(msg.payload.data);\nif (result != null) {\n    msg.payload = result;\n    return msg;\n} else {\n    return null; // Return null if no arrays are found\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 920,
        "y": 420,
        "wires": [
            [
                "4517be7281db9072",
                "e7e89d12bb126d12"
            ]
        ]
    }
]